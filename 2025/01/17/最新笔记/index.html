<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>最新笔记 | Tech智汇站</title><meta name="author" content="智汇君"><meta name="copyright" content="智汇君"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="最新笔记"><meta name="application-name" content="最新笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="最新笔记"><meta property="og:url" content="http://example.com/2025/01/17/最新笔记/index.html"><meta property="og:site_name" content="Tech智汇站"><meta property="og:description" content="笔记docker-v不一定要把代码项目路径挂载上，像不需要代码修改的场景、代码打包成镜像等不需要挂载开发时需要，将代码同步到开发环境持久化数据时需要挂载配置文件docker run   python3 xxx.py镜像内没有代码不行，而且这种在docker run时直接执行命令有-v时也不行，这种一"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://example.com/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg"><meta property="article:author" content="智汇君"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg"><meta name="description" content="笔记docker-v不一定要把代码项目路径挂载上，像不需要代码修改的场景、代码打包成镜像等不需要挂载开发时需要，将代码同步到开发环境持久化数据时需要挂载配置文件docker run   python3 xxx.py镜像内没有代码不行，而且这种在docker run时直接执行命令有-v时也不行，这种一"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/01/17/%E6%9C%80%E6%96%B0%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css#fontawesome_animation 如果有就会加载，示例值：https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":270},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 智汇君","link":"链接: ","source":"来源: Tech智汇站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Tech智汇站',
  title: '最新笔记',
  postAI: '',
  pageFillDescription: '笔记, docker, -v, python, 函数, list, 列表生成式, 时间库, time, .strptime(), .gmtime(), .strftime(), 时间戳, datetime, .strftime(), isoformat(), 时间戳, strptime, timedelta, 字符串, .strip() .lstrip() .rstrip(), .count(), .join([]), .endswith(), .startswith(), .split(), .repalce(), .find() .index(), .isdigit() .isalpha() .isalnum(), .upper() .lower() .swapcase(), .title(), .center() .ljust() .rjust(), 函数, any()函数, enumerate(), 三元运算符, set(), .add(), .update(), 差操作, 对称差集操作, 交操作, 并操作, dict, defaultdict, dict, range, isinstance和type, cast(), list, .sort(), .append(), .extend(), .index(), os, getenv, listdir, getcwd, os.path, os.remove(), 读写文件with open, json, re, 日志, loguru, .info, .warning, logging, Path, .joinpath(), .exists(), .mkdir(), .parent, .is_file(), .is_dir(), .suffix, .suffixes, .name, .stem, @property和setter, str和repr, eval()和exec(), eval, exec, 库, tqdm, argparse, .add_argument, *name_or_flags, type, default, nargs, action, metavar, 案例, copy, 赋值, 浅拷贝, 案例, 深拷贝, deepcopy方法, sys, 序列化和反序列化, 异常, init.py, 配置加载, yaml文件, json文件, 类, 函数参数, init和new方法, 延迟初始化类, 类方法, cls, @classmethod和@staticmethod和实例方法, k8s, shell命令, history, history设置执行时间, docker, 构建镜像, dockerfile, docker run, vscode, 快捷键, git, git配置, 创建一个项目, 克隆命令, git branch, 创建分支, 显示分支, 提交记录, git log, git log –oneline, git log –graph, 筛选, 切换分支, 删除分支, 合并分支, git fetch和git pull, FETCH_HEAD与HEAD的区别, 发布分支, git stash, 命令, .vscode, 调试源码, MongoDB, 数据类型, 12.23交流, 测试杨瑞, 批量处理sensor备份, lidar_extcalib_sensor.py, dynamic_annotation_sensor.py, sensor写法备份, f笔记不一定要把代码项目路径挂载上像不需要代码修改的场景代码打包成镜像等不需要挂载开发时需要将代码同步到开发环境持久化数据时需要挂载配置文件镜像内没有代码不行而且这种在时直接执行命令有时也不行这种一定代表代码里有对应代码通过这种方式可以进入容器后再执行里的代码代表把前者里的所有内容挂载进去露姐案例函数位置参数默认参数默认参数写在不选参数后面且默认参数只能是不可变对象可变参数函数内部会获得一个如果本来传的参就是或者等则在前加可以正常使用左闭右开列表生成式时间库时间是一个对象返回字符串时间戳时间秒小数点位与时区无关全球统一时区不同时间不同时间字符串也就是时间格式时间戳字符串字符串去除左右两侧空格字符串移除末尾斜杠字符串移除头部斜杠计算的数量字符串所有分割字符串从左开始分割一次字符串替代成什么找对应字符串第一次出现的位置判断是否全是数字判断是否全是字母各种语言的字母都可以字母或者数字全大写全小写大小写互换转换成每个单词首字母大写输出使用对字符串进行对齐输出输出输出函数函数列表中存在至少一个元素输出元组中不存在元素输出字典中存在至少一个值输出集合中不存在元素输出三元运算符输出输出添加重复元素集合会自动去重输出不会重复添加可以这样写但通常不会这样做这行代码没有意义因为没有保存集合有意义的链式调用应该这样注意这样会得到因为返回所以应该分开写正确写法使用添加多个元素输出差操作对称差集操作除了交集外的交操作并操作和类型声明这行代码用于从系统环境变量中获取值并设置默认值环境变量名为获取当前工作路径获取文件的文件夹目录获取文件路径包含文件名是中用于分离文件名和扩展名的函数当前脚本文件的完整路径比如获取当前文件所在的目录路径比如相对路径表示上一级目录从回到最终结果读写文件用于美化格式转换成字符串加载成日志输出日志你会使用啥还是这几个模块更加不错哦知乎控制日志输出级别输出样式这是一条日志这是一条日志总结起来就是日志级别日志名称日志内容日志类型或者有这个参数就不会输出在终端默认追加模式设置日志格式日志级别不能与同时存在可以是网络得到的是相关的对象字符串路径如果为则会创建缺失的父目录如果为则父目录必须已存在否则抛出如果为则忽略目录已存在的情况不会抛出异常如果为当目录已存在时抛出获取扩展名包括点例如获取所有扩展名列表例如获取完整的文件名包括扩展名例如获取不包含扩展名的文件名例如如果文件名以点开头例如或有多个点例如它只去除最后一个点之后的部分和测试测试属性保护初始化获取返回的是副本获取的尝试修改副本修改副本后内部未改变测试设置器设置新列表后修改外部列表修改外部列表后内部未改变直接操作内部列表不推荐但可能发生可以但违反封装原则直接修改后和公众号禅师调用调用重新创建对象公众号禅师公众号禅师禅师给用户看的商品信息原价现价折扣给开发者看的完整信息原价现价折扣和函数是一个内置函数用于将字符串解析并执行为表达式输出输出输出危险的使用示例一段恶意代码这将执行恶意代码函数和函数在一定程度上是相似的都可以执行字符串形式的代码但是函数返回表达式的结果而函数不返回任何结果此外可以执行更复杂的代码结构比如类定义函数定义和多行语句而只能解析单个表达式这会导致语法错误因为不是一个表达式这可以正常执行因为是一个语句输出库最简单的用法包装任何可迭代对象模拟耗时操作手动控制进度设置总进度每次更新自定义描述处理中处理中设置进度条单位个文件个文件位置参数可以是参数名如或选项标志如例如或可变参数输出文件路径输入文件路径将命令行参数转换为指定类型可以是内置类型也可以是自定义函数当参数未在命令行中指定时的默认值如果指定了通常参数不再是必需的指定应消耗的命令行参数数量常用值或个参数或多个参数或多个参数整数精确指定参数数量所有剩余参数指定当命令行遇到此参数时的动作常用值存储参数值默认存储常量值存储布尔值将值添加到列表将常量添加到列表统计参数出现次数显示帮助信息显示版本信息在帮助信息中显示的参数名称例如会在帮助中显示为某些如使用的常量值例如限制参数的允许值例如是否必须提供此参数对可选参数有效默认对于风格参数参数的帮助信息描述可以在帮助文本中使用等占位符解析结果中属性的名称默认从参数名推导去掉将替换为与一起使用指定版本字符串案例位置参数输入文件路径可选参数输出文件路径带类型转换重复次数默认布尔标志详细输出模式多值参数一个或多个尺寸存储常量赋值只是创建新引用指向同一对象原对象也被修改浅拷贝或或第一层没被影响但是嵌套对象仍然共享嵌套列表被修改了案例如果传入的是列表两个对象会共享这个列表测试被修改了也被修改了创建新列表创建列表的副本避免共享浅拷贝或者如果需要深拷贝的版本深拷贝一个正确处理可变默认参数的类示例初始化存储的值可选的列表如果不提供则创建新列表注意会创建副本不会修改传入的列表创建新列表创建传入列表的副本使用进行浅拷贝或者进行深拷贝浅拷贝添加项目获取项目列表的副本返回副本保护内部数据创建对象的深拷贝测试测试默认参数测试传入列表原列表未改变深拷贝完全独立的副本原对象完全不变方法可以使用方法自定义深拷贝行为定义对象的深拷贝行为创建对象进行深拷贝是一个列表插入前面可以避免标准库的覆盖示例在索引位置插入插入后的输出新插入的路径原来的第一个元素原来的第二个元素原来的第三个元素序列化和反序列化序列化反序列化异常数据分组失败包初始化文件提供本地存储和存储的统一接口封装导入时更方便没有时的导入有时的导入更简洁配置加载文件直接加载为字典访问文件可以是传统通常使用文件加载配置文件或访问配置可以像字典一样访问类函数参数表示可以是或或对比固定长度的元组个元素第一个是第二个是个元素都是任意多个元素都是所有元素可以是任何类型元组是不可变的序列泛型元组简化写法更简洁复杂的联合类型和方法后调用第一个参数初始化器初始化实例设置属性不返回任何值返回先调用第一个参数构造器创建实例分配内存必须返回实例延迟初始化类加载配置文初始化对象获取单例实例此时是空的在需要时进行实际初始化延迟加载配置类方法类变量存储单例实例初始化方法但实际初始化是延迟的实际执行初始化的私有方法加载配置初始化完成获取单例实例的工厂方法第一次调用创建实例创建新实例实例存在但未初始化且提供了配置文件初始化现有实例其他情况直接返回现有实例是类本身而不是类的实例类方法第一个参数必须是它类变量属于类本身指向类可以用来访问类变量访问类变量创建新实例等价于调用其他类方法通过类调用自动传入和和实例方法参数实例和类都可以访问类方法无特殊参数实例和类都可以访问类方法实例方法参数实例可以访问只有实例才可以访问实例属性和都可以访问类属性第关从零到一在中部署和的全面指导部署博客的简称容器编排平台主要用于自动化部署扩展和管理容器化应用程序腾讯汽车云容器服务是腾讯云面向汽车行业推出的容器化应用管理平台主要服务于汽车企业的数字化应用开发和运维场景基于技术命令参数存在且不为空使用参数不存在使用请输入目标镜像查看容量空间还有磁盘设置执行时间在或对应的配置文件中添加各部分含义获取所有容器的名称列表只输出容器的名称字段静默模式不输出匹配内容只返回退出码匹配行首变量应该是容器名称匹配行尾整体精确匹配容器名称整行完全匹配构建镜像设置环境变量通过指令允许在构建时动态指定设置为启用代理设置配置执行命令暴露端口供外部访问快捷键配置创建一个项目远程仓库别名你的用户名你的仓库名将当前所在的分支重命名为远程仓库别名克隆命令创建分支分支名创建分支显示分支显示所有分支本地远程只显示本地分支只显示远程分支显示分支及其跟踪的远程分支显示本地分支及其最近提交修改提交记录加了点注释加了点注释一行显示一条提交简洁加了点注释加了点注释漏写添加带数据版本的系统调度逻辑拆之后新增失败统计路径获取方式修改修改监控资产修改了使用方式重构资产代码显示图形化分支结构加了点注释加了点注释漏写显示完整信息显示文件变更统计显示具体修改内容只显示修改的文件名加了点注释设置成这样分区数量不符合要求提前显示会延迟一天的提前显示当天加了点注释筛选按数量限制显示最近条提交显示最近条提交按时间筛选按作者筛选张三按提交信息筛选搜索包含的提交信息按文件筛选查看的修改历史查看目录的修改历史最实用的组合图形化一行显示显示统计信息图形漂亮的格式化输出查看在分支但不在分支的提交查看两个分支的差异显示所有分支的时间线按时间倒序自定义输出格式常用占位符短哈希完整哈希提交说明作者名相对时间日期分页模式下的常用操作键按键功能说明空格键向下翻一页最常用回车键向下翻一行逐行查看向上翻一页回看内容退出分页模式返回命令行关键词搜索内容输入后输入关键词搜索查找下一个匹配项配合搜索使用查找上一个匹配项跳到第一行跳到最后一行切换分支分支名切换分支分支名创建和切换这个命令是错误的因为它试图切换到这个分支但是一个远程仓库的别名不是一个分支正确的应该是切换到指定分支创建并切换到新分支创建一个跟踪远程分支的本地分支删除分支分支名删除分支合并分支将远程分支合并到当前分支或者这个命令实际上是两个操作的组合获取远程分支的最新代码将获取的远程分支合并到当前分支先将你的修改暂存起来执行下面操作要先暂存不然代码会丢失拉取远程最新代码将你暂存的修改恢复回来和和的主要区别如下仅更新远程分支的信息不会自动合并到本地分支用户需要手动执行合并操作同时执行和直接将远程分支的更新合并到当前分支可能隐藏过程细节与的区别是一个指向当前工作分支的引用而则是指向最后一次从远程仓库抓取分支的最新状态通常用于表示当前工作分支的状态而则用于表示最近一次从远程仓库拉取的数据发布分支当你在本地创建了一个新分支但远程仓库还没有这个分支时你需要将这个本地分支发布推送到远程仓库在本地创建新分支进行开发做了一些提交将本地分支发布到远程仓库这里的表示设置上游分支网页上合并分支并删除当前分支修改代码并提交当前在分支有未提交的修改显示有修改的文件暂存当前修改或描述信息工作区变干净了显示没有修改切换到其他分支修复后回到分支恢复暂存的修改场景拉取最新代码前你想拉取远程更新但有未提交的修改有本地修改但想先拉取最新代码暂存修改拉取最新代码恢复修改命令可以自行配置用于调试配置的文件调试源码在终端中执行创建指向源码的符号链接现在可以直接导入概念解析菜鸟教程入门到精通保姆级别教程博客园将数据存储为一个文档数据结构由键值对组成文档类似于对象字段值可以包含其他文档数组及文档数组数据库集合文档字段主键索引表连接不支持文档中的键值对是有序的区分类型和大小写的文档不能有重复的键文档键命名规范键不能含有空字符这个字符用来表示键的结尾和有特别的意义只有在特定环境下才能使用以下划线开头的键是保留的不是严格要求的数据类型文档的键是字符串除了少数例外情况键可以使用任意字符文档中的值不仅可以是在双引号里面的字符串还可以是其他几种数据类型甚至可以是整个嵌入的文档交流进入容器之后外部代码修改不一定得行和学习测试杨瑞批量处理备份获取物化成功的分区长度值获取物化成功的分区长度值有正在物化的分区不执行新的物化长度值长度值失败的分区单独处理长度值请求下游处理获取物化成功的分区长度值获取物化成功的分区长度值有正在物化的分区不执行新的物化长度值长度值失败的分区单独处理长度值请求下游处理写法备份检测到作业成功执行分区键获取动态未找到分区的物化记录构建输入上下文并加载数据资产数据中缺少字段提取所有剪辑名称未找到任何数据获取已注册的分区没有新的剪辑需要添加只添加新的剪辑分区成功添加个新分区只有在有新剪辑时才触发运行请求下游处理创业债券国债地方债企业债银行利率会影响公元公元前世纪财政赤字通过国债地方债主权外债来弥补赤字率赤字率财政赤字总额国内生产总值贸易赤字主权外债美债只有当它被美国以外的国家和实体持有时增值税期货期权当日收益本金当日收益率收盘本金当日收益开盘本金第二日负收益率前一日收益率第二日收益本金本金第二日负收益率',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-02-23 23:00:31',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://video-b2g.pages.dev/" title="视频解析"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/视频.png" alt="视频解析"/><span class="back-menu-item-text">视频解析</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://md5-uir.pages.dev/" title="md5值解密"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/MD5.png" alt="md5值解密"/><span class="back-menu-item-text">md5值解密</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://screencheck.pages.dev/#welcome" title="屏幕坏点检查"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/屏幕外观.png" alt="屏幕坏点检查"/><span class="back-menu-item-text">屏幕坏点检查</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://htmleditor-9lo.pages.dev/" title="在线html编辑器"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/html编辑器.png" alt="在线html编辑器"/><span class="back-menu-item-text">在线html编辑器</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://ttyong-github-io.pages.dev/" title="旧博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/博客.png" alt="旧博客"/><span class="back-menu-item-text">旧博客</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Tech智汇站</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/GitHub/" style="font-size: 1.05rem;">GitHub<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/NodeJs/" style="font-size: 1.05rem;">NodeJs<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>3</sup></a><a href="/tags/github/" style="font-size: 1.05rem;">github<sup>1</sup></a><a href="/tags/idea/" style="font-size: 1.05rem;">idea<sup>1</sup></a><a href="/tags/%E5%85%AC%E8%80%83%E6%9D%A8%E8%80%81%E5%B8%88/" style="font-size: 1.05rem;">公考杨老师<sup>10</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem;">博客<sup>1</sup></a><a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 1.05rem;">大数据<sup>31</sup></a><a href="/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC%E4%B8%BB%E9%A2%98/" style="font-size: 1.05rem;">安知鱼主题<sup>1</sup></a><a href="/tags/%E5%BB%96%E9%9B%AA%E5%B3%B0/" style="font-size: 1.05rem;">廖雪峰<sup>15</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">计算机网络<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>10</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">96</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a></div></div><h1 class="post-title" itemprop="name headline">最新笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="post-meta-icon anzhiyufont anzhiyu-icon-calendar-days"></i><span class="post-meta-label">发表于</span><time itemprop="dateCreated datePublished" datetime="2025-01-17T09:35:02.000Z" title="发表于 2025-01-17 17:35:02">2025-01-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span></div></div></div><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/01/17/%E6%9C%80%E6%96%B0%E7%AC%94%E8%AE%B0/"><header><h1 id="CrawlerTitle" itemprop="name headline">最新笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">智汇君</span><time itemprop="dateCreated datePublished" datetime="2025-01-17T09:35:02.000Z" title="undefined 2025-01-17 17:35:02">2025-01-17</time></header><h1 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h1><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p>不一定要把代码项目路径挂载上，像不需要代码修改的场景、代码打包成镜像等不需要挂载<br>开发时需要，将代码同步到开发环境<br>持久化数据时需要<br>挂载配置文件<br>docker run   python3 xxx.py镜像内没有代码不行，而且这种在docker run时直接执行命令有-v时也不行，这种一定代表代码里有对应代码。通过-v这种方式可以进入容器后再执行-v里的代码<br>-v ..\test:\workspace\ 代表把前者里的所有内容挂载进去 </p>
<p>露姐案例：<br>docker run -it –rm –name 3D_detect –shm-size&#x3D;32g –gpus all -v &#x2F;home&#x2F;lium&#x2F;dynamic_target_visualisation&#x2F;.vscode-server:&#x2F;root&#x2F;.vscode-server -v &#x2F;home&#x2F;lium&#x2F;dynamic_target_visualisation&#x2F;:&#x2F;root&#x2F;dynamic_target_visualisation&#x2F; changan-map.tencentcloudcr.com&#x2F;train&#x2F;3donenet:v20251119 </p>
<h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">位置参数 </span><br><span class="line">默认参数：默认参数写在不选参数后面，且默认参数只能是不可变对象 </span><br><span class="line">可变参数：*args，函数内部会获得一个tuple。如果本来传的参就是list或者tuple等则在前加*可以正常使用 </span><br><span class="line">*name_or_flags: str </span><br></pre></td></tr></table></figure>

<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>list[n,m] 左闭右开<br>json.loads(str)[“data”] </p>
<h4 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式"></a>列表生成式</h4><p>[i for i in x if i xxx] </p>
<h3 id="时间库"><a href="#时间库" class="headerlink" title="时间库"></a>时间库</h3><h4 id="time"><a href="#time" class="headerlink" title="time"></a>time</h4><h5 id="strptime"><a href="#strptime" class="headerlink" title=".strptime()"></a>.strptime()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;time.strptime(&#x27;2025-12-12_13-59-30&#x27;, &#x27;%Y-%m-%d_%H-%M-%S&#x27;).tm_hour </span><br><span class="line"> </span><br><span class="line">time.struct_time(tm_year=2025, tm_mon=12, tm_mday=12, tm_hour=13, tm_min=59, tm_sec=30, tm_wday=4, tm_yday=346, tm_isdst=-1) </span><br></pre></td></tr></table></figure>

<h5 id="gmtime"><a href="#gmtime" class="headerlink" title=".gmtime()"></a>.gmtime()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;time.gmtime(time.time()) # UTC时间 是一个对象 </span><br><span class="line">time.struct_time(tm_year=2026, tm_mon=1, tm_mday=12, tm_hour=10, tm_min=0, tm_sec=51, tm_wday=0, tm_yday=12, tm_isdst=0) </span><br></pre></td></tr></table></figure>

<h5 id="strftime"><a href="#strftime" class="headerlink" title=".strftime()"></a>.strftime()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import time </span><br><span class="line">curr_time = time.strftime(&quot;%Y-%m-%d_%H-%M-%S&quot;) # 返回字符串 </span><br><span class="line"> </span><br><span class="line">&#x27;2026-01-08_11-14-36&#x27; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, utc_time) </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; time.strftime(&#x27;%Y-%m-%d_%H-%M-%S&#x27;, time.strptime(&#x27;2025-12-12_13-59-30&#x27;, &#x27;%Y-%m-%d_%H-%M-%S&#x27;)) </span><br><span class="line">&#x27;2025-12-12_13-59-30&#x27; </span><br></pre></td></tr></table></figure>

<h5 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.time() # UTC时间 秒小数点15位 与时区无关，全球统一 </span><br><span class="line">time.localtime(time.time()) # 时区不同时间不同 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">time.mktime(time.strptime(&#x27;时间字符串&#x27;,&#x27;%Y-%m-%d也就是时间格式&#x27;)) </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; time.mktime(time.strptime(&#x27;2025-12-12_13-59-30&#x27;,&#x27;%Y-%m-%d_%H-%M-%S&#x27;)) </span><br><span class="line">1765519170.0 </span><br></pre></td></tr></table></figure>

<h4 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h4><h5 id="strftime-1"><a href="#strftime-1" class="headerlink" title=".strftime()"></a>.strftime()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; datetime.now().strftime(&quot;%Y-%m-%d&quot;) </span><br><span class="line">&#x27;2026-01-08&#x27; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; datetime.now() </span><br><span class="line">datetime.datetime(2026, 1, 8, 11, 22, 14, 313776) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shanghai_time = datetime.now(pytz.timezone(&#x27;Asia/Shanghai&#x27;)) </span><br><span class="line">partition = shanghai_time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;) </span><br></pre></td></tr></table></figure>

<h5 id="isoformat"><a href="#isoformat" class="headerlink" title="isoformat()"></a>isoformat()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt;clip_create_time= datetime.now().isoformat() </span><br><span class="line"> </span><br><span class="line">&#x27;2026-01-08T11:19:16.862023&#x27; </span><br></pre></td></tr></table></figure>

<h5 id="时间戳-1"><a href="#时间戳-1" class="headerlink" title="时间戳"></a>时间戳</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">datetime.now().timestamp() # year month day hour minute second </span><br><span class="line">1768210913.418071 </span><br></pre></td></tr></table></figure>

<h5 id="strptime-1"><a href="#strptime-1" class="headerlink" title="strptime"></a>strptime</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime, timedelta </span><br><span class="line">datetime.strptime(date_key, &quot;%Y-%m-%d&quot;) - timedelta(days=1) </span><br></pre></td></tr></table></figure>

<h5 id="timedelta"><a href="#timedelta" class="headerlink" title="timedelta"></a>timedelta</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(datetime.strptime(date_key, &quot;%Y-%m-%d&quot;) - timedelta(days=1)).strftime(&quot;%Y-%m-%d&quot;) </span><br></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="strip-lstrip-rstrip"><a href="#strip-lstrip-rstrip" class="headerlink" title=".strip() .lstrip() .rstrip()"></a>.strip() .lstrip() .rstrip()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字符串.strip()去除左右两侧空格 </span><br><span class="line">字符串.rstrip(&#x27;/&#x27;)  移除末尾斜杠 </span><br><span class="line">字符串.lstrip(&#x27;/&#x27;)  移除头部斜杠 </span><br></pre></td></tr></table></figure>

<h4 id="count"><a href="#count" class="headerlink" title=".count()"></a>.count()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;xxx&quot;.count(&quot;/&quot;) </span><br><span class="line"> </span><br><span class="line">&#x27;a&#123;]dfef&#123;&#125;ddf&#x27;.count(&#x27;&#123;&#125;&#x27;) 计算&#123;&#125;的数量 </span><br></pre></td></tr></table></figure>

<h4 id="join"><a href="#join" class="headerlink" title=".join([])"></a>.join([])</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;_&#x27;.join([xxxxx]) </span><br></pre></td></tr></table></figure>

<h4 id="endswith"><a href="#endswith" class="headerlink" title=".endswith()"></a>.endswith()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;.endswith() </span><br></pre></td></tr></table></figure>

<h4 id="startswith"><a href="#startswith" class="headerlink" title=".startswith()"></a>.startswith()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name.startswith(&quot;_&quot;) </span><br></pre></td></tr></table></figure>

<h4 id="split"><a href="#split" class="headerlink" title=".split()"></a>.split()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字符串.split(&#x27;xxx&#x27;) 所有分割 </span><br><span class="line">字符串.split(&#x27;xxx&#x27;,1) 从左开始分割一次 </span><br></pre></td></tr></table></figure>

<h4 id="repalce"><a href="#repalce" class="headerlink" title=".repalce()"></a>.repalce()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">filename = filename.replace(&quot;/./&quot;, &quot;/&quot;) </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">字符串.replace(&#x27;xxx&#x27;,&#x27;替代成什么&#x27;) </span><br></pre></td></tr></table></figure>

<h4 id="find-index"><a href="#find-index" class="headerlink" title=".find() .index()"></a>.find() .index()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">找对应字符串第一次出现的位置 </span><br></pre></td></tr></table></figure>

<h4 id="isdigit-isalpha-isalnum"><a href="#isdigit-isalpha-isalnum" class="headerlink" title=".isdigit() .isalpha() .isalnum()"></a>.isdigit() .isalpha() .isalnum()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.isdigit() 判断是否全是数字 </span><br><span class="line">.isalpha() 判断是否全是字母 各种语言的字母都可以 </span><br><span class="line">.isalnum() 字母或者数字 </span><br></pre></td></tr></table></figure>

<h4 id="upper-lower-swapcase"><a href="#upper-lower-swapcase" class="headerlink" title=".upper() .lower() .swapcase()"></a>.upper() .lower() .swapcase()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.upper() 全大写 </span><br><span class="line">.lower() 全小写 </span><br><span class="line">.swapcase() 大小写互换 </span><br></pre></td></tr></table></figure>

<h4 id="title"><a href="#title" class="headerlink" title=".title()"></a>.title()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">转换成每个单词首字母大写 </span><br><span class="line"> </span><br><span class="line">s = &quot;hello world&quot; </span><br><span class="line">print(s.title()) # 输出: Hello World </span><br></pre></td></tr></table></figure>

<h4 id="center-ljust-rjust"><a href="#center-ljust-rjust" class="headerlink" title=".center() .ljust() .rjust()"></a>.center() .ljust() .rjust()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用 center()、ljust()、rjust() 对字符串进行对齐 </span><br><span class="line"> </span><br><span class="line">s = &quot;Python&quot; </span><br><span class="line">print(s.center(10, &quot;*&quot;)) # 输出: **Python** </span><br><span class="line">print(s.ljust(10, &quot;-&quot;)) # 输出: Python---- </span><br><span class="line">print(s.rjust(10, &quot;-&quot;)) # 输出: ----Python </span><br></pre></td></tr></table></figure>

<h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><h4 id="any-函数"><a href="#any-函数" class="headerlink" title="any()函数"></a>any()函数</h4><p>列表中存在至少一个 True 元素<br>my_list &#x3D; [False, False, True, False]<br>print(any(my_list)) # 输出: True<br>元组中不存在 True 元素<br>my_tuple &#x3D; (False, False, False)<br>print(any(my_tuple)) # 输出: False<br>字典中存在至少一个 True 值<br>my_dict &#x3D; {‘a’: False, ‘b’: True, ‘c’: False}<br>print(any(my_dict.values())) # 输出: True<br>集合中不存在 True 元素<br>my_set &#x3D; {False, False, False}<br>print(any(my_set)) # 输出: False </p>
<h4 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate()"></a>enumerate()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for i,e in enumerate(list) </span><br></pre></td></tr></table></figure>

<h3 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 if xxx==xxx else 0</span><br></pre></td></tr></table></figure>



<h3 id="set"><a href="#set" class="headerlink" title="set()"></a>set()</h3><h4 id="add"><a href="#add" class="headerlink" title=".add()"></a>.add()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tmp = <span class="built_in">set</span>() </span><br><span class="line">tmp.add(<span class="number">1</span>) </span><br><span class="line"><span class="built_in">print</span>(my_set)  <span class="comment"># 输出: &#123;1&#125; </span></span><br><span class="line"> </span><br><span class="line">my_set.add(<span class="number">2</span>) </span><br><span class="line"><span class="built_in">print</span>(my_set)  <span class="comment"># 输出: &#123;1, 2&#125; </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 添加重复元素（集合会自动去重） </span></span><br><span class="line">my_set.add(<span class="number">1</span>) </span><br><span class="line"><span class="built_in">print</span>(my_set)  <span class="comment"># 输出: &#123;1, 2&#125;，不会重复添加 </span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以这样写，但通常不会这样做 </span></span><br><span class="line"><span class="built_in">set</span>().add(<span class="number">1</span>)  <span class="comment"># 这行代码没有意义，因为没有保存集合 </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 有意义的链式调用应该这样： </span></span><br><span class="line">my_set = <span class="built_in">set</span>().add(<span class="number">1</span>)  <span class="comment"># 注意：这样会得到 None！ </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 因为 .add() 返回 None，所以应该分开写： </span></span><br><span class="line">my_set = <span class="built_in">set</span>() </span><br><span class="line">my_set.add(<span class="number">1</span>)  <span class="comment"># 正确写法 </span></span><br></pre></td></tr></table></figure>

<h4 id="update"><a href="#update" class="headerlink" title=".update()"></a>.update()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 update() 添加多个元素 </span></span><br><span class="line">my_set = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; </span><br><span class="line">my_set.update([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]) </span><br><span class="line"><span class="built_in">print</span>(my_set)  <span class="comment"># 输出: &#123;1, 2, 3, 4, 5, 6&#125; </span></span><br></pre></td></tr></table></figure>

<h4 id="差操作"><a href="#差操作" class="headerlink" title="差操作"></a>差操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set().difference(set()) </span><br><span class="line">set() - set() </span><br></pre></td></tr></table></figure>

<h5 id="对称差集操作"><a href="#对称差集操作" class="headerlink" title="对称差集操作"></a>对称差集操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set()^set() #除了交集外的 </span><br></pre></td></tr></table></figure>

<h4 id="交操作"><a href="#交操作" class="headerlink" title="交操作"></a>交操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp; </span><br></pre></td></tr></table></figure>

<h4 id="并操作"><a href="#并操作" class="headerlink" title="并操作"></a>并操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">| </span><br></pre></td></tr></table></figure>

<h3 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.items() </span><br><span class="line">.keys() </span><br><span class="line">.values() </span><br></pre></td></tr></table></figure>

<h4 id="defaultdict"><a href="#defaultdict" class="headerlink" title="defaultdict"></a>defaultdict</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">daily_groups = defaultdict(list) </span><br><span class="line">daily_groups[time_period].append(&#123;&#x27;data_name&#x27;:dat_name,&#x27;sorce_path&#x27;:sorce_path&#125;) </span><br><span class="line">keys = list(daily_groups.keys()) </span><br></pre></td></tr></table></figure>

<h4 id="dict-1"><a href="#dict-1" class="headerlink" title="dict"></a>dict</h4><pre><code>        navigation_set=set() 
        items=0 
        for feature in features: 
           navigation= feature[&#39;properties&#39;].get(&#39;navigation&#39;,0) 
</code></pre>
<h4 id="range"><a href="#range" class="headerlink" title="range"></a>range</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">range(1,13) 1-12</span><br><span class="line"></span><br><span class="line">range(1,13，3) 1 4 7 10</span><br></pre></td></tr></table></figure>



<h4 id="isinstance和type"><a href="#isinstance和type" class="headerlink" title="isinstance和type"></a>isinstance和type</h4><p>isinstance(i, dict) </p>
<h4 id="cast"><a href="#cast" class="headerlink" title="cast()"></a>cast()</h4><p>typing<br>类型声明<br>cast(CafsUtilsV1,context.resources.cafs_file_manager) </p>
<h3 id="list-1"><a href="#list-1" class="headerlink" title="list"></a>list</h3><h4 id="sort"><a href="#sort" class="headerlink" title=".sort()"></a>.sort()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l = [] </span><br><span class="line">l.sort() </span><br></pre></td></tr></table></figure>

<h4 id="append"><a href="#append" class="headerlink" title=".append()"></a>.append()</h4><h4 id="extend"><a href="#extend" class="headerlink" title=".extend()"></a>.extend()</h4><h4 id="index"><a href="#index" class="headerlink" title=".index()"></a>.index()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp = group_keys.index(context.cursor) </span><br></pre></td></tr></table></figure>

<h3 id="os"><a href="#os" class="headerlink" title="os"></a>os</h3><h4 id="getenv"><a href="#getenv" class="headerlink" title="getenv"></a>getenv</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.getenv(&#x27;ENV_NAME&#x27;,&#x27;&#x27;)： </span><br><span class="line">这行代码用于从系统环境变量中获取值，并设置默认值，环境变量名为ENV_NAME </span><br></pre></td></tr></table></figure>

<h4 id="listdir"><a href="#listdir" class="headerlink" title="listdir"></a>listdir</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir(PATH_TO_REQUESTS) </span><br></pre></td></tr></table></figure>

<h4 id="getcwd"><a href="#getcwd" class="headerlink" title="getcwd"></a>getcwd</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os </span><br><span class="line">os.getcwd() 获取当前工作路径 </span><br></pre></td></tr></table></figure>

<h4 id="os-path"><a href="#os-path" class="headerlink" title="os.path"></a>os.path</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">os.path.dirname() 获取文件的文件夹目录 </span><br><span class="line"> </span><br><span class="line">os.path.join(&quot;dir&quot;,&quot;file&quot;) </span><br><span class="line"> </span><br><span class="line">os.path.abspath(__file__) 获取文件路径包含文件名 </span><br><span class="line"> </span><br><span class="line">os.path.isfile(file_path) </span><br><span class="line"> </span><br><span class="line">os.path.splitext()  是 Python 中用于分离文件名和扩展名的函数。 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PATH_TO_REQUESTS = os.path.join(os.path.dirname(__file__), &quot;../&quot;, &quot;data/requests&quot;) </span><br><span class="line"> </span><br><span class="line">__file__ - 当前Python脚本文件的完整路径 </span><br><span class="line">比如：/home/user/project/src/utils/config.py </span><br><span class="line"> </span><br><span class="line">os.path.dirname(__file__) - 获取当前文件所在的目录路径 </span><br><span class="line">比如：/home/user/project/src/utils </span><br><span class="line"> </span><br><span class="line">&quot;../&quot; - 相对路径，表示上一级目录 </span><br><span class="line">从 /home/user/project/src/utils回到 /home/user/project/src </span><br><span class="line"> </span><br><span class="line">最终结果：/home/user/project/src/data/requests </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filename.endswith(&quot;.json&quot;) </span><br></pre></td></tr></table></figure>

<h4 id="os-remove"><a href="#os-remove" class="headerlink" title="os.remove()"></a>os.remove()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(tem_file) </span><br></pre></td></tr></table></figure>

<h3 id="读写文件with-open"><a href="#读写文件with-open" class="headerlink" title="读写文件with open"></a>读写文件with open</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(&quot;./output.json&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f: </span><br><span class="line">	json.dump(result_data, f, indent=2, ensure_ascii=False)  # indent 用于美化格式 </span><br></pre></td></tr></table></figure>

<h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">json.dumps(current_state) 转换成字符串</span><br><span class="line"></span><br><span class="line">json.dumps(result_data,indent=2, ensure_ascii=False)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">json.loads(context.cursor) 加载成dict </span><br><span class="line"> </span><br><span class="line">with open(link_path, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f: </span><br><span class="line">    data = json.load(f) </span><br><span class="line">    features= data.get(&#x27;features&#x27;,[]) </span><br></pre></td></tr></table></figure>

<h3 id="re"><a href="#re" class="headerlink" title="re"></a>re</h3><p>match &#x3D; re.search(r’<em>([^</em>]+)_’, filename)<br>if match:<br>    return match.group(1) </p>
<h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/339961421">python输出日志你会使用啥？print还是logging ,这几个模块更加不错哦。 - 知乎</a> </p>
<h4 id="loguru"><a href="#loguru" class="headerlink" title="loguru"></a>loguru</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from loguru import logger </span><br></pre></td></tr></table></figure>

<h5 id="info"><a href="#info" class="headerlink" title=".info"></a>.info</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.info(&quot;....&quot;) </span><br></pre></td></tr></table></figure>

<h5 id="warning"><a href="#warning" class="headerlink" title=".warning"></a>.warning</h5><h4 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#控制日志输出级别 </span><br><span class="line">root = RootLogger(WARNING) </span><br><span class="line">Logger.root = root </span><br><span class="line">Logger.manager = Manager(Logger.root) </span><br><span class="line"> </span><br><span class="line"># 输出样式 </span><br><span class="line">WARNING:root:这是一条warning日志 </span><br><span class="line">ERROR:root:这是一条error日志 </span><br><span class="line">总结起来就是： 日志级别:日志名称:日志内容 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 日志类型 </span><br><span class="line">logging.debug(&quot;&quot;) </span><br><span class="line">logging.warning(&quot;&quot;) </span><br><span class="line">logging.error(&quot;&quot;) </span><br><span class="line">logging.info(&quot;&quot;) </span><br><span class="line">logging.critical(&quot;&quot;) </span><br><span class="line">或者 </span><br><span class="line">logging.log(logging.DEBUG,&quot;&quot;) </span><br><span class="line">logging.log(logging.WARNING,&quot;&quot;) </span><br><span class="line">logging.log(logging.ERROR,&quot;&quot;) </span><br><span class="line">logging.log(logging.INFO,&quot;&quot;) </span><br><span class="line">logging.log(logging.CRITICAL,&quot;&quot;) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logging.basicConfig(filename=&#x27;有这个参数就不会输出在终端&#x27;,filemode=&#x27;默认追加模式&#x27;,format=&#x27;设置日志格式&#x27;,level=&#x27;日志级别&#x27;，stream=&#x27;不能与filename同时存在，可以是sys.stdout、sys.stderr、网络stream&#x27;) </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from pathlib import Path </span><br></pre></td></tr></table></figure>

<h4 id="joinpath"><a href="#joinpath" class="headerlink" title=".joinpath()"></a>.joinpath()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from pathlib import Path </span><br><span class="line">dir = Path(context.resources.path_resource[&#x27;dataset_path&#x27;])/partition+&#x27;/&#x27; # 得到的是path相关的对象 </span><br><span class="line"> </span><br><span class="line">dir = str( Path(target_path.value).joinpath(clip_name.value))+&#x27;/&#x27;+check_path # 字符串路径 </span><br></pre></td></tr></table></figure>

<h4 id="exists"><a href="#exists" class="headerlink" title=".exists()"></a>.exists()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path(config_yaml).exists() </span><br></pre></td></tr></table></figure>

<h4 id="mkdir"><a href="#mkdir" class="headerlink" title=".mkdir()"></a>.mkdir()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parents如果为 True，则会创建缺失的父目录。如果为 False，则父目录必须已存在，否则抛出 FileNotFoundError。 </span><br><span class="line"> </span><br><span class="line">exist_ok如果为True，则忽略目录已存在的情况，不会抛出异常。如果为 False，当目录已存在时抛出 FileExistsError。 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logs_dir = Path(cfg.temp_dir) </span><br><span class="line">logs_dir.mkdir(parents=True, exist_ok=True) </span><br></pre></td></tr></table></figure>

<h4 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self._mkdir(Path(local_file).parent)  </span><br></pre></td></tr></table></figure>

<h4 id="is-file"><a href="#is-file" class="headerlink" title=".is_file()"></a>.is_file()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path(xxx).is_file() </span><br></pre></td></tr></table></figure>

<h4 id="is-dir"><a href="#is-dir" class="headerlink" title=".is_dir()"></a>.is_dir()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path(xxx).is_dir() </span><br></pre></td></tr></table></figure>

<h4 id="suffix"><a href="#suffix" class="headerlink" title=".suffix"></a>.suffix</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Path.suffix：获取扩展名（包括点），例如 &#x27;.txt&#x27; </span><br><span class="line"> </span><br><span class="line">path.suffix in [&#x27;.yaml&#x27;, &#x27;.yml&#x27;] </span><br></pre></td></tr></table></figure>
<h4 id="suffixes"><a href="#suffixes" class="headerlink" title=".suffixes"></a>.suffixes</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path.suffixes：获取所有扩展名列表，例如 [&#x27;.tar&#x27;, &#x27;.gz&#x27;] </span><br></pre></td></tr></table></figure>

<h4 id="name"><a href="#name" class="headerlink" title=".name"></a>.name</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path.name：获取完整的文件名（包括扩展名），例如 &#x27;document.txt&#x27; </span><br></pre></td></tr></table></figure>

<h4 id="stem"><a href="#stem" class="headerlink" title=".stem"></a>.stem</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Path.stem：获取不包含扩展名的文件名，例如 &#x27;document&#x27; </span><br><span class="line"> </span><br><span class="line">如果文件名以点开头（例如 &#x27;.gitignore&#x27;）或有多个点（例如 &#x27;archive.tar.gz&#x27;），它只去除最后一个点之后的部分 </span><br></pre></td></tr></table></figure>

<h3 id="property和setter"><a href="#property和setter" class="headerlink" title="@property和setter"></a>@property和setter</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">class MyClass: </span><br><span class="line">    def __init__(self, value, items=None): </span><br><span class="line">        self.value = value </span><br><span class="line">        self._items = [] </span><br><span class="line">         </span><br><span class="line">        if items is not None: </span><br><span class="line">            self._items = items </span><br><span class="line">     </span><br><span class="line">    @property </span><br><span class="line">    def items(self): </span><br><span class="line">        return self._items.copy() </span><br><span class="line">     </span><br><span class="line">    @items.setter </span><br><span class="line">    def items(self, value): </span><br><span class="line">        self._items = list(value) </span><br><span class="line">     </span><br><span class="line">    def __repr__(self): </span><br><span class="line">        return f&quot;MyClass(value=&#123;self.value&#125;, items=&#123;self._items&#125;)&quot; </span><br><span class="line"> </span><br><span class="line"># 测试 </span><br><span class="line">if __name__ == &quot;__main__&quot;: </span><br><span class="line">    # 1. 测试属性保护 </span><br><span class="line">    obj = MyClass(1, [1, 2, 3]) </span><br><span class="line">    print(f&quot;初始化: &#123;obj&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    # 获取items（返回的是副本） </span><br><span class="line">    items_copy = obj.items </span><br><span class="line">    print(f&quot;获取的items: &#123;items_copy&#125;&quot;) </span><br><span class="line">    print(f&quot;items_copy is obj._items: &#123;items_copy is obj._items&#125;&quot;)  # False </span><br><span class="line">     </span><br><span class="line">    # 尝试修改副本 </span><br><span class="line">    items_copy.append(999) </span><br><span class="line">    print(f&quot;修改副本后: &#123;obj&#125;&quot;)  # 内部未改变 </span><br><span class="line">     </span><br><span class="line">    # 2. 测试设置器 </span><br><span class="line">    external_list = [10, 20, 30] </span><br><span class="line">    obj.items = external_list </span><br><span class="line">    print(f&quot;\n设置新列表后: &#123;obj&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    # 修改外部列表 </span><br><span class="line">    external_list.append(999) </span><br><span class="line">    print(f&quot;修改外部列表后: &#123;obj&#125;&quot;)  # 内部未改变 </span><br><span class="line">     </span><br><span class="line">    # 3. 直接操作内部列表（不推荐，但可能发生） </span><br><span class="line">    obj._items.append(888)  # 可以，但违反封装原则 </span><br><span class="line">    print(f&quot;直接修改_items后: &#123;obj&#125;&quot;) </span><br></pre></td></tr></table></figure>

<h3 id="str和repr"><a href="#str和repr" class="headerlink" title="str和repr"></a>str和repr</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__str__ </span><br><span class="line">__repr__ </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class PythonCS: </span><br><span class="line">    def __init__(self, name): </span><br><span class="line">        self.name = name </span><br><span class="line"> </span><br><span class="line">    def __str__(self): </span><br><span class="line">        return &#x27;公众号: &#x27; + self.name </span><br><span class="line"> </span><br><span class="line">    def __repr__(self): </span><br><span class="line">        return &quot;PythonCS(&#x27;&#123;&#125;&#x27;)&quot;.format(self.name) </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">object = PythonCS(&#x27;Python禅师&#x27;) </span><br><span class="line"># str调用 </span><br><span class="line">print(object) </span><br><span class="line">print(str(object)) </span><br><span class="line"> </span><br><span class="line"># repr调用 </span><br><span class="line">ex = repr(object) </span><br><span class="line">print(ex) </span><br><span class="line"> </span><br><span class="line"># 重新创建对象 </span><br><span class="line">object2 = eval(ex) </span><br><span class="line">print(object.name == object2.name) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">公众号: Python禅师 </span><br><span class="line">公众号: Python禅师 </span><br><span class="line">PythonCS(&#x27;Python禅师&#x27;) </span><br><span class="line">True </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Product: </span><br><span class="line">    def __init__(self, name, price, discount=0): </span><br><span class="line">        self.name = name </span><br><span class="line">        self.price = price </span><br><span class="line">        self.discount = discount </span><br><span class="line">     </span><br><span class="line">    def __str__(self): </span><br><span class="line">        &quot;&quot;&quot;给用户看的商品信息&quot;&quot;&quot; </span><br><span class="line">        final_price = self.price * (1 - self.discount/100) </span><br><span class="line">        if self.discount &gt; 0: </span><br><span class="line">            return f&quot;&#123;self.name&#125;: 原价¥&#123;self.price&#125;，现价¥&#123;final_price:.2f&#125;（&#123;self.discount&#125;%折扣）&quot; </span><br><span class="line">        return f&quot;&#123;self.name&#125;: ¥&#123;self.price&#125;&quot; </span><br><span class="line">     </span><br><span class="line">    def __repr__(self): </span><br><span class="line">        &quot;&quot;&quot;给开发者看的完整信息&quot;&quot;&quot; </span><br><span class="line">        return f&quot;Product(&#x27;&#123;self.name&#125;&#x27;, &#123;self.price&#125;, discount=&#123;self.discount&#125;)&quot; </span><br><span class="line"> </span><br><span class="line">product = Product(&quot;iPhone 15&quot;, 6999, discount=10) </span><br><span class="line">print(str(product))   # iPhone 15: 原价¥6999，现价¥6299.10（10%折扣） </span><br><span class="line">print(repr(product))  # Product(&#x27;iPhone 15&#x27;, 6999, discount=10) </span><br></pre></td></tr></table></figure>

<h3 id="eval-和exec"><a href="#eval-和exec" class="headerlink" title="eval()和exec()"></a>eval()和exec()</h3><h4 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval函数是一个内置函数，用于将字符串解析并执行为Python表达式 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x = 1 </span><br><span class="line">print(eval(&#x27;x+1&#x27;))  # 输出：2 </span><br><span class="line"> </span><br><span class="line">print(eval(&#x27;x+y&#x27;, &#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2&#125;))  # 输出：3 </span><br><span class="line"> </span><br><span class="line">print(eval(&#x27;[x**2 for x in range(5)]&#x27;))  # 输出：[0, 1, 4, 9, 16] </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 危险的使用示例 </span><br><span class="line">user_input = &quot;os.system(&#x27;rm -rf /&#x27;)&quot;  # 一段恶意代码 </span><br><span class="line">eval(user_input)  # 这将执行恶意代码 </span><br></pre></td></tr></table></figure>

<h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">eval函数和exec函数在一定程度上是相似的，都可以执行字符串形式的Python代码。但是，eval函数返回表达式的结果，而exec函数不返回任何结果。此外，exec可以执行更复杂的Python代码结构，比如类定义、函数定义和多行语句，而eval只能解析单个表达式。 </span><br><span class="line"> </span><br><span class="line">eval(&#x27;x = 5&#x27;)  # 这会导致语法错误，因为&#x27;x = 5&#x27;不是一个表达式 </span><br><span class="line"> </span><br><span class="line">exec(&#x27;x = 5&#x27;)  # 这可以正常执行，因为&#x27;x = 5&#x27;是一个语句 </span><br><span class="line">print(x)  # 输出：5 </span><br></pre></td></tr></table></figure>

<h3 id="库"><a href="#库" class="headerlink" title="库"></a>库</h3><h4 id="tqdm"><a href="#tqdm" class="headerlink" title="tqdm"></a>tqdm</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from tqdm import tqdm </span><br><span class="line">import time </span><br><span class="line"> </span><br><span class="line"># 最简单的用法：包装任何可迭代对象 </span><br><span class="line">for i in tqdm(range(100)): </span><br><span class="line">    time.sleep(0.01)  # 模拟耗时操作 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from tqdm import tqdm </span><br><span class="line">import time </span><br><span class="line"> </span><br><span class="line"># 手动控制进度 </span><br><span class="line">pbar = tqdm(total=100)  # 设置总进度 </span><br><span class="line">for i in range(100): </span><br><span class="line">    time.sleep(0.01) </span><br><span class="line">    pbar.update(1)  # 每次更新1 </span><br><span class="line">pbar.close() </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 自定义描述 </span><br><span class="line">for i in tqdm(range(100), desc=&quot;处理中&quot;): </span><br><span class="line">    time.sleep(0.01) </span><br><span class="line"> </span><br><span class="line">处理中:   8%|███████████  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 设置进度条单位 </span><br><span class="line">for i in tqdm(range(100), unit=&quot;个文件&quot;): </span><br><span class="line">    time.sleep(0.01) </span><br><span class="line">18%|█████████████████████████▌                                                                                                                    | 18/100 [00:18&lt;01:26,  1.06s/个文件]  </span><br></pre></td></tr></table></figure>

<h4 id="argparse"><a href="#argparse" class="headerlink" title="argparse"></a>argparse</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import argparse </span><br><span class="line"> </span><br><span class="line">def get_args(): </span><br><span class="line">    parser = argparse.ArgumentParser( </span><br><span class="line">            epilog=None </span><br><span class="line">            or f&quot;&quot;&quot; </span><br><span class="line">    Examples: </span><br><span class="line"> </span><br><span class="line">    Run relocation: </span><br><span class="line">        $ &#123;sys.argv[0]&#125; --config ../configs/config.yaml </span><br><span class="line"> </span><br><span class="line">    &quot;&quot;&quot;, </span><br><span class="line">            formatter_class=argparse.RawDescriptionHelpFormatter, </span><br><span class="line">        ) </span><br><span class="line"> </span><br><span class="line">    parser.add_argument( </span><br><span class="line">        &quot;--config&quot;, </span><br><span class="line">        default=&quot;./settings.yaml&quot;, </span><br><span class="line">        metavar=&quot;xxx&quot;, </span><br><span class="line">        help=&quot;xxxx&quot;, </span><br><span class="line">    ) </span><br><span class="line">    parser.add_argument( </span><br><span class="line">        &quot;--config&quot;, </span><br><span class="line">        default=None, </span><br><span class="line">        help=&quot;xxxx&quot; </span><br><span class="line">    ) </span><br><span class="line">     </span><br><span class="line">    parser.add_argument( </span><br><span class="line">        &quot;--xx&quot;, </span><br><span class="line">        default=&quot;&quot; </span><br><span class="line">    ) </span><br><span class="line">     </span><br><span class="line">    parser.add_argument( </span><br><span class="line">        &quot;--xx&quot;, </span><br><span class="line">        default=&quot;&quot; </span><br><span class="line">    )     </span><br><span class="line">         </span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    return parser.parse_args() </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">args = get_args() </span><br><span class="line">config_yaml = args.config </span><br></pre></td></tr></table></figure>

<h5 id="add-argument"><a href="#add-argument" class="headerlink" title=".add_argument"></a>.add_argument</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(method) def add_argument( </span><br><span class="line">    *name_or_flags: str, </span><br><span class="line">    action: _ActionStr | Type[Action] = ..., </span><br><span class="line">    nargs: int | _NArgsStr | _SUPPRESS_T = ..., </span><br><span class="line">    const: Any = ..., </span><br><span class="line">    default: Any = ..., </span><br><span class="line">    type: ((str) -&gt; _T@add_argument) | FileType = ..., </span><br><span class="line">    choices: Iterable[_T@add_argument] | None = ..., </span><br><span class="line">    required: bool = ..., </span><br><span class="line">    help: str | None = ..., </span><br><span class="line">    metavar: str | tuple[str, ...] | None = ..., </span><br><span class="line">    dest: str | None = ..., </span><br><span class="line">    version: str = ..., </span><br><span class="line">    **kwargs: Any </span><br><span class="line">) -&gt; Action </span><br></pre></td></tr></table></figure>

<h6 id="name-or-flags"><a href="#name-or-flags" class="headerlink" title="*name_or_flags"></a>*name_or_flags</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*name_or_flags </span><br><span class="line">位置参数，可以是参数名（如 &#x27;filename&#x27;）或选项标志（如 &#x27;-f&#x27;, &#x27;--file&#x27;） </span><br><span class="line">例如：add_argument(&#x27;filename&#x27;)或 add_argument(&#x27;-f&#x27;, &#x27;--file&#x27;) </span><br><span class="line"></span><br><span class="line">*name_or_flags: str </span><br><span class="line">可变参数 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(&#x27;-o&#x27;, &#x27;--output&#x27;,  </span><br><span class="line">                   help=&#x27;输出文件路径&#x27;, </span><br><span class="line">                   default=&#x27;output.txt&#x27;) </span><br><span class="line">                   </span><br><span class="line">parser.add_argument(&#x27;input_file&#x27;, help=&#x27;输入文件路径&#x27;)</span><br></pre></td></tr></table></figure>

<h6 id="type"><a href="#type" class="headerlink" title="type"></a>type</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将命令行参数转换为指定类型 </span><br><span class="line">可以是内置类型：int, float, str </span><br><span class="line">也可以是自定义函数：type=lambda x: x.upper()  </span><br></pre></td></tr></table></figure>

<h6 id="default"><a href="#default" class="headerlink" title="default"></a>default</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当参数未在命令行中指定时的默认值 </span><br><span class="line">如果指定了default，通常参数不再是必需的 </span><br></pre></td></tr></table></figure>

<h6 id="nargs"><a href="#nargs" class="headerlink" title="nargs"></a>nargs</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">指定应消耗的命令行参数数量 </span><br><span class="line">常用值： </span><br><span class="line">&#x27;?&#x27;- 0或1个参数 </span><br><span class="line">&#x27;*&#x27;- 0或多个参数 </span><br><span class="line">&#x27;+&#x27;- 1或多个参数 </span><br><span class="line">整数 - 精确指定参数数量</span><br><span class="line"></span><br><span class="line">argparse.REMAINDER- 所有剩余参数 </span><br></pre></td></tr></table></figure>

<h6 id="action"><a href="#action" class="headerlink" title="action"></a>action</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">action=&quot;count&quot; </span><br><span class="line"> </span><br><span class="line">指定当命令行遇到此参数时的动作 </span><br><span class="line">常用值： </span><br><span class="line">&#x27;store&#x27;- 存储参数值（默认） </span><br><span class="line">&#x27;store_const&#x27;- 存储常量值 </span><br><span class="line">&#x27;store_true&#x27;/&#x27;store_false&#x27;- 存储布尔值 </span><br><span class="line">&#x27;append&#x27;- 将值添加到列表 </span><br><span class="line">&#x27;append_const&#x27;- 将常量添加到列表 </span><br><span class="line">&#x27;count&#x27;- 统计参数出现次数 </span><br><span class="line">&#x27;help&#x27;- 显示帮助信息 </span><br><span class="line">&#x27;version&#x27;- 显示版本信息 </span><br></pre></td></tr></table></figure>

<h6 id="metavar"><a href="#metavar" class="headerlink" title="metavar"></a>metavar</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在帮助信息中显示的参数名称 </span><br><span class="line">例如：metavar=&#x27;FILE&#x27;会在帮助中显示为 FILE </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const </span><br><span class="line">某些action（如&#x27;store_const&#x27;）使用的常量值 </span><br><span class="line">例如：action=&#x27;store_const&#x27;, const=42 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">choices </span><br><span class="line">限制参数的允许值 </span><br><span class="line">例如：choices=[&#x27;small&#x27;, &#x27;medium&#x27;, &#x27;large&#x27;] </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">required </span><br><span class="line">是否必须提供此参数（对可选参数有效） </span><br><span class="line">默认：False（对于-f/--flag风格参数） </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">help </span><br><span class="line">参数的帮助信息描述 </span><br><span class="line">可以在帮助文本中使用%(default)s, %(type)s等占位符 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dest </span><br><span class="line">解析结果中属性的名称 </span><br><span class="line">默认从参数名推导（去掉-，将-替换为_） </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">version </span><br><span class="line">与action=&#x27;version&#x27;一起使用，指定版本字符串 </span><br></pre></td></tr></table></figure>

<h6 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser() </span><br><span class="line"> </span><br><span class="line"># 位置参数 </span><br><span class="line">	parser.add_argument(&#x27;input_file&#x27;, help=&#x27;输入文件路径&#x27;) </span><br><span class="line">	 </span><br><span class="line">	# 可选参数 </span><br><span class="line">	parser.add_argument(&#x27;-o&#x27;, &#x27;--output&#x27;,  </span><br><span class="line">	                   help=&#x27;输出文件路径&#x27;, </span><br><span class="line">	                   default=&#x27;output.txt&#x27;) </span><br><span class="line">	 </span><br><span class="line">	# 带类型转换 </span><br><span class="line">	parser.add_argument(&#x27;-n&#x27;, &#x27;--number&#x27;, </span><br><span class="line">	                   type=int, </span><br><span class="line">	                   default=1, </span><br><span class="line">	                   help=&#x27;重复次数 (默认: %(default)d)&#x27;) </span><br><span class="line">	 </span><br><span class="line">	# 布尔标志 </span><br><span class="line">	parser.add_argument(&#x27;-v&#x27;, &#x27;--verbose&#x27;, </span><br><span class="line">	                   action=&#x27;store_true&#x27;, </span><br><span class="line">	                   help=&#x27;详细输出模式&#x27;) </span><br><span class="line">	 </span><br><span class="line">	# 多值参数 </span><br><span class="line">	parser.add_argument(&#x27;--sizes&#x27;, </span><br><span class="line">	                   nargs=&#x27;+&#x27;, </span><br><span class="line">	                   choices=[&#x27;S&#x27;, &#x27;M&#x27;, &#x27;L&#x27;], </span><br><span class="line">	                   help=&#x27;一个或多个尺寸&#x27;) </span><br><span class="line">	 </span><br><span class="line">	# 存储常量 </span><br><span class="line">	parser.add_argument(&#x27;--debug&#x27;, </span><br><span class="line">	                   action=&#x27;store_const&#x27;, </span><br><span class="line">	                   const=True, </span><br><span class="line">	                   default=False) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br></pre></td></tr></table></figure>

<h5 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [1, 2, [3, 4]] </span><br><span class="line">list2 = list1  # 只是创建新引用，指向同一对象 </span><br><span class="line">list2[0] = 99 </span><br><span class="line">print(list1)  # [99, 2, [3, 4]]  # 原对象也被修改 </span><br></pre></td></tr></table></figure>

<h5 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line">list1 = [1, 2, [3, 4]] </span><br><span class="line">list2 = copy.copy(list1)  # 或 list1.copy() 或 list1[:] </span><br><span class="line"> </span><br><span class="line">list2[0] = 99 </span><br><span class="line">print(list1)  # [1, 2, [3, 4]]  # 第一层没被影响 </span><br><span class="line"> </span><br><span class="line"># 但是嵌套对象仍然共享！ </span><br><span class="line">list2[2][0] = 999 </span><br><span class="line">print(list1)  # [1, 2, [999, 4]]  # 嵌套列表被修改了 </span><br></pre></td></tr></table></figure>
<h6 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class MyClass: </span><br><span class="line">    def __init__(self, value, items=None): </span><br><span class="line">        self.value = value </span><br><span class="line">        self.items = items if items is not None else [] </span><br><span class="line">        # 如果传入的 items 是列表，两个对象会共享这个列表！ </span><br><span class="line"> </span><br><span class="line"># 测试 </span><br><span class="line">original_list = [1, 2, 3] </span><br><span class="line">obj1 = MyClass(1, original_list) </span><br><span class="line">obj2 = MyClass(2, original_list) </span><br><span class="line"> </span><br><span class="line">obj1.items.append(999) </span><br><span class="line">print(original_list)  # [1, 2, 3, 999]  # 被修改了！ </span><br><span class="line">print(obj2.items)     # [1, 2, 3, 999]  # 也被修改了！ </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line"> </span><br><span class="line">class MyClass: </span><br><span class="line">    def __init__(self, value, items=None): </span><br><span class="line">        self.value = value </span><br><span class="line">        if items is None: </span><br><span class="line">            self.items = []  # 创建新列表 </span><br><span class="line">        else: </span><br><span class="line">            # 创建列表的副本，避免共享 </span><br><span class="line">            self.items = list(items)  # 浅拷贝 </span><br><span class="line">            # 或者 self.items = copy.copy(items) </span><br><span class="line">     </span><br><span class="line">    def deep_copy_init(self, value, items=None): </span><br><span class="line">        &quot;&quot;&quot;如果需要深拷贝的版本&quot;&quot;&quot; </span><br><span class="line">        self.value = value </span><br><span class="line">        if items is None: </span><br><span class="line">            self.items = [] </span><br><span class="line">        else: </span><br><span class="line">            self.items = copy.deepcopy(items)  # 深拷贝 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line">from typing import List, Any, Optional </span><br><span class="line"> </span><br><span class="line">class MyClass: </span><br><span class="line">    &quot;&quot;&quot;一个正确处理可变默认参数的类示例&quot;&quot;&quot; </span><br><span class="line">     </span><br><span class="line">    def __init__(self, value: Any, items: Optional[List[Any]] = None): </span><br><span class="line">        &quot;&quot;&quot; </span><br><span class="line">        初始化 MyClass </span><br><span class="line">         </span><br><span class="line">        Args: </span><br><span class="line">            value: 存储的值 </span><br><span class="line">            items: 可选的列表，如果不提供则创建新列表 </span><br><span class="line">                  （注意：会创建副本，不会修改传入的列表） </span><br><span class="line">        &quot;&quot;&quot; </span><br><span class="line">        self.value = value </span><br><span class="line">         </span><br><span class="line">        if items is None: </span><br><span class="line">            self._items = []  # 创建新列表 </span><br><span class="line">        else: </span><br><span class="line">            # 创建传入列表的副本 </span><br><span class="line">            # 使用 list() 进行浅拷贝，或者 copy.deepcopy() 进行深拷贝 </span><br><span class="line">            self._items = list(items)  # 浅拷贝 </span><br><span class="line">     </span><br><span class="line">    def add_item(self, item: Any) -&gt; None: </span><br><span class="line">        &quot;&quot;&quot;添加项目&quot;&quot;&quot; </span><br><span class="line">        self._items.append(item) </span><br><span class="line">     </span><br><span class="line">    def get_items(self) -&gt; List[Any]: </span><br><span class="line">        &quot;&quot;&quot;获取项目列表的副本&quot;&quot;&quot; </span><br><span class="line">        return self._items.copy()  # 返回副本，保护内部数据 </span><br><span class="line">     </span><br><span class="line">    def __repr__(self) -&gt; str: </span><br><span class="line">        return f&quot;MyClass(value=&#123;self.value&#125;, items=&#123;self._items&#125;)&quot; </span><br><span class="line">     </span><br><span class="line">    def copy(self) -&gt; &#x27;MyClass&#x27;: </span><br><span class="line">        &quot;&quot;&quot;创建对象的深拷贝&quot;&quot;&quot; </span><br><span class="line">        return copy.deepcopy(self) </span><br><span class="line"> </span><br><span class="line"># 测试 </span><br><span class="line">if __name__ == &quot;__main__&quot;: </span><br><span class="line">    # 测试1：默认参数 </span><br><span class="line">    obj1 = MyClass(1) </span><br><span class="line">    obj2 = MyClass(2) </span><br><span class="line">    obj1.add_item(&quot;A&quot;) </span><br><span class="line">    print(f&quot;obj1: &#123;obj1&#125;&quot;)  # MyClass(value=1, items=[&#x27;A&#x27;]) </span><br><span class="line">    print(f&quot;obj2: &#123;obj2&#125;&quot;)  # MyClass(value=2, items=[]) </span><br><span class="line">     </span><br><span class="line">    # 测试2：传入列表 </span><br><span class="line">    my_list = [1, 2, 3] </span><br><span class="line">    obj3 = MyClass(3, my_list) </span><br><span class="line">    obj3.add_item(4) </span><br><span class="line">    print(f&quot;my_list: &#123;my_list&#125;&quot;)  # [1, 2, 3]  # 原列表未改变 </span><br><span class="line">    print(f&quot;obj3: &#123;obj3&#125;&quot;)        # MyClass(value=3, items=[1, 2, 3, 4]) </span><br></pre></td></tr></table></figure>

<h5 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line">res_json = copy.deepcopy(res_json_origin) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line">list1 = [1, 2, [3, 4]] </span><br><span class="line">list2 = copy.deepcopy(list1)  # 完全独立的副本 </span><br><span class="line"> </span><br><span class="line">list2[0] = 99 </span><br><span class="line">list2[2][0] = 999 </span><br><span class="line">print(list1)  # [1, 2, [3, 4]]  # 原对象完全不变 </span><br><span class="line">print(list2)  # [99, 2, [999, 4]] </span><br></pre></td></tr></table></figure>

<h6 id="deepcopy方法"><a href="#deepcopy方法" class="headerlink" title="deepcopy方法"></a>deepcopy方法</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以使用 __deepcopy__方法自定义深拷贝行为 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import copy </span><br><span class="line">  </span><br><span class="line">class MyClass: </span><br><span class="line">    def __init__(self, data): </span><br><span class="line">        self.data = data </span><br><span class="line">  </span><br><span class="line">    def __deepcopy__(self, memo): </span><br><span class="line">        # 定义对象的深拷贝行为 </span><br><span class="line">        new_object = MyClass(copy.deepcopy(self.data, memo)) </span><br><span class="line">        return new_object </span><br><span class="line">  </span><br><span class="line"># 创建对象 </span><br><span class="line">obj = MyClass([1, 2, 3]) </span><br><span class="line">  </span><br><span class="line"># 进行深拷贝 </span><br><span class="line">deep_copied_obj = copy.deepcopy(obj) </span><br></pre></td></tr></table></figure>




<h3 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">workspace_path = &quot;/workspace&quot; </span><br><span class="line">sys.path.insert(0, workspace_path) # sys.path 是一个列表 插入前面可以避免标准库的覆盖 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># sys.path 示例 </span><br><span class="line">sys.path = [ </span><br><span class="line">    &#x27;/usr/local/lib/python3.8/site-packages&#x27;, </span><br><span class="line">    &#x27;/usr/lib/python3.8&#x27;, </span><br><span class="line">    &#x27;/home/user/project&#x27; </span><br><span class="line">] </span><br><span class="line"> </span><br><span class="line"># 在索引 0 位置插入 </span><br><span class="line">sys.path.insert(0, &#x27;/workspace&#x27;) </span><br><span class="line"> </span><br><span class="line"># 插入后的 sys.path </span><br><span class="line">print(sys.path) </span><br><span class="line"># 输出： </span><br><span class="line"># [ </span><br><span class="line">#     &#x27;/workspace&#x27;,                      # 新插入的路径 </span><br><span class="line">#     &#x27;/usr/local/lib/python3.8/site-packages&#x27;,  # 原来的第一个元素 </span><br><span class="line">#     &#x27;/usr/lib/python3.8&#x27;,              # 原来的第二个元素 </span><br><span class="line">#     &#x27;/home/user/project&#x27;               # 原来的第三个元素 </span><br><span class="line"># ] </span><br></pre></td></tr></table></figure>



<h3 id="序列化和反序列化"><a href="#序列化和反序列化" class="headerlink" title="序列化和反序列化"></a>序列化和反序列化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pickle </span><br><span class="line">pickled_obj = pickle.dumps(obj) 序列化 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj = pickle.loads(xxx) 反序列化 </span><br></pre></td></tr></table></figure>




<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try: </span><br><span class="line">pass </span><br><span class="line">except Exception as e: </span><br><span class="line">        context.log.error(f&quot;数据分组失败: &#123;str(e)&#125;&quot;) </span><br><span class="line">        raise </span><br></pre></td></tr></table></figure>

<h3 id="init-py"><a href="#init-py" class="headerlink" title="init.py"></a><strong>init</strong>.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python </span><br><span class="line"># -*- coding: utf-8 -*- </span><br><span class="line">&quot;&quot;&quot; </span><br><span class="line">dataengine 包初始化文件 </span><br><span class="line">&quot;&quot;&quot; </span><br><span class="line"> </span><br><span class="line">from .xxx import xxx </span><br><span class="line">from .xxx import xxx </span><br><span class="line"> </span><br><span class="line">__version__ = &quot;1.0.0&quot; </span><br><span class="line">__author__ = &quot;liumin&quot; </span><br><span class="line">__all__ = [ </span><br><span class="line">    &quot;xx&quot;, </span><br><span class="line">    &quot;xxx&quot; </span><br><span class="line">] </span><br><span class="line">__description__ = &quot;提供本地存储和COS存储的统一接口封装&quot; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">导入时更方便 </span><br><span class="line"># 没有 __init__.py 时的导入 </span><br><span class="line">from data_engine.data_engine import DataEngine </span><br><span class="line">from data_engine.storage import IStorage </span><br><span class="line">from data_engine.cos_storage import COSStorage </span><br><span class="line"> </span><br><span class="line"># 有 __init__.py 时的导入（更简洁） </span><br><span class="line">from data_engine import DataEngine, IStorage, COSStorage </span><br></pre></td></tr></table></figure>




<h3 id="配置加载"><a href="#配置加载" class="headerlink" title="配置加载"></a>配置加载</h3><h4 id="yaml文件"><a href="#yaml文件" class="headerlink" title="yaml文件"></a>yaml文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import yaml </span><br><span class="line"> </span><br><span class="line">with open(config_yaml) as f: </span><br><span class="line">    config = yaml.safe_load(f)  # 直接加载为字典 </span><br><span class="line"> </span><br><span class="line"># 访问 </span><br><span class="line">model_path = config[&quot;output_reloc_result&quot;][&quot;model_path&quot;] </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configs = yaml.load(open(yaml_file), Loader=yaml.FullLoader) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dumped = yaml.dump( </span><br><span class="line">                dict, default_flow_style=None, allow_unicode=True, width=9999 </span><br><span class="line">            ) </span><br><span class="line">with PathManager.open(filename, &quot;w&quot;) as f: </span><br><span class="line">   f.write(dumped) </span><br><span class="line"> </span><br><span class="line">_ = yaml.unsafe_load(dumped) </span><br></pre></td></tr></table></figure>




<h4 id="json文件"><a href="#json文件" class="headerlink" title="json文件"></a>json文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import json </span><br><span class="line">with open(filename, &#x27;r&#x27;) as f: </span><br><span class="line">config = json.load(f) </span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 可以是传统 YAML </span><br><span class="line">model: </span><br><span class="line">  type: &quot;ResNet&quot; </span><br><span class="line">  layers: 50 </span><br><span class="line">  pretrained: true </span><br><span class="line"> </span><br><span class="line">train: </span><br><span class="line">  batch_size: 32 </span><br><span class="line">  lr: 0.001 </span><br><span class="line">  epochs: 100 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># config.py (LazyConfig 通常使用 .py 文件) </span><br><span class="line">from my_project.model import ResNet </span><br><span class="line">from my_project.optimizer import AdamW </span><br><span class="line"> </span><br><span class="line">model = ResNet( </span><br><span class="line">    layers=50, </span><br><span class="line">    pretrained=True </span><br><span class="line">) </span><br><span class="line"> </span><br><span class="line">train = dict( </span><br><span class="line">    batch_size=32, </span><br><span class="line">    lr=0.001, </span><br><span class="line">    epochs=100, </span><br><span class="line">    optimizer=AdamW(lr=0.001) </span><br><span class="line">) </span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cfg = LazyConfig.load(config_yaml) </span><br><span class="line"> </span><br><span class="line"># 1. 加载配置文件 </span><br><span class="line">cfg = LazyConfig.load(&quot;path/to/config.py&quot;) </span><br><span class="line"># 或 </span><br><span class="line">cfg = LazyConfig.load(&quot;path/to/config.yaml&quot;) </span><br><span class="line"> </span><br><span class="line"># 2. 访问配置 </span><br><span class="line">print(cfg.model.type)      # &quot;ResNet&quot; </span><br><span class="line">print(cfg.train.batch_size)  # 32 </span><br><span class="line"> </span><br><span class="line"># 3. 可以像字典一样访问 </span><br><span class="line">print(cfg[&quot;model&quot;][&quot;type&quot;]) </span><br></pre></td></tr></table></figure>

<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><h4 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from typing import Union,Tuple </span><br><span class="line"> </span><br><span class="line"># Union[Type1, Type2, ...] 表示可以是 Type1 或 Type2 或 ... </span><br><span class="line">def load(filename: str, keys: Union[None, str, Tuple[str, ...]] = None): </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 对比固定长度的元组： </span><br><span class="line">Tuple[str, int]         # 2个元素：第一个是str，第二个是int </span><br><span class="line">Tuple[str, str, str]    # 3个元素，都是str </span><br><span class="line">Tuple[str, ...]         # 任意多个元素，都是str ✅ </span><br><span class="line">Tuple[Any, ...]     # 所有元素可以是任何类型 </span><br><span class="line"> </span><br><span class="line"># 元组是不可变的序列 </span><br><span class="line">t1: Tuple = (1, 2, 3)           # 泛型元组 </span><br><span class="line">t2: Tuple[int] = (1, 2, 3)      # Python 3.9+ 简化写法 </span><br><span class="line">t3: tuple[int] = (1, 2, 3)      # Python 3.9+ 更简洁 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from typing import Union, Tuple, List, Dict, Any </span><br><span class="line"> </span><br><span class="line"># 复杂的联合类型 </span><br><span class="line">ComplexType = Union[ </span><br><span class="line">    None, </span><br><span class="line">    str, </span><br><span class="line">    int, </span><br><span class="line">    Tuple[str, ...], </span><br><span class="line">    List[str], </span><br><span class="line">    Dict[str, Union[str, int, float]] </span><br><span class="line">] </span><br><span class="line"> </span><br><span class="line">def process(data: ComplexType): </span><br></pre></td></tr></table></figure>

<h4 id="init和new方法"><a href="#init和new方法" class="headerlink" title="init和new方法"></a>init和new方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__init__()：后调用，第一个参数self，初始化器，初始化实例（设置属性），不返回任何值（返回None） </span><br><span class="line"> </span><br><span class="line">__new__()：先调用，第一个参数cls，构造器，创建实例（分配内存），必须返回实例 </span><br></pre></td></tr></table></figure>




<h4 id="延迟初始化类"><a href="#延迟初始化类" class="headerlink" title="延迟初始化类"></a>延迟初始化类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class IoProcess: </span><br><span class="line">    _instance = None </span><br><span class="line">    _initialized = False </span><br><span class="line"> </span><br><span class="line">    def __new__(cls, *args, **kwargs): </span><br><span class="line">        if cls._instance is None: </span><br><span class="line">            cls._instance = super().__new__(cls) </span><br><span class="line">        return cls._instance </span><br><span class="line"> </span><br><span class="line">    def __init__(self): </span><br><span class="line">        if not self._initialized: </span><br><span class="line">            pass </span><br><span class="line"> </span><br><span class="line">    def init(self, yaml_file): </span><br><span class="line">        # 加载配置文 </span><br><span class="line">        configs = yaml.load(open(yaml_file), Loader=yaml.FullLoader) </span><br><span class="line">        configs = configs[&#x27;output_reloc_result&#x27;] </span><br><span class="line">        self.config_base = configs[&quot;config_base&quot;] </span><br><span class="line">        self.match_dict = configs[&quot;match_dict&quot;] </span><br><span class="line">        self._initialized = True </span><br><span class="line">        # 初始化对象 </span><br><span class="line">        self.cos = CosUtils(self.config_base) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 1. 获取单例实例 </span><br><span class="line">ioProcess = IoProcess()  # 此时 __init__ 是空的 </span><br><span class="line"> </span><br><span class="line"># 2. 在需要时进行实际初始化 </span><br><span class="line">ioProcess.init(config_yaml)  # 延迟加载配置 </span><br></pre></td></tr></table></figure>

<h4 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class utils:     </span><br><span class="line">    @classmethod </span><br><span class="line">    def SaveJSON(cls, file_path, json_obj): </span><br><span class="line">        with open(file_path, &quot;w&quot;) as json_file: </span><br><span class="line">            json.dump(json_obj, json_file) </span><br><span class="line">            json_file.close() </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">class IoProcess: </span><br><span class="line">    _instance = None  # 类变量，存储单例实例 </span><br><span class="line">     </span><br><span class="line">    def __init__(self, yaml_file=None): </span><br><span class="line">        &quot;&quot;&quot;初始化方法，但实际初始化是延迟的&quot;&quot;&quot; </span><br><span class="line">        self._initialized = False </span><br><span class="line">        if yaml_file: </span><br><span class="line">            self._init_from_yaml(yaml_file) </span><br><span class="line">     </span><br><span class="line">    def _init_from_yaml(self, yaml_file): </span><br><span class="line">        &quot;&quot;&quot;实际执行初始化的私有方法&quot;&quot;&quot; </span><br><span class="line">        if not self._initialized: </span><br><span class="line">            # 加载配置 </span><br><span class="line">            with open(yaml_file) as f: </span><br><span class="line">                config = yaml.safe_load(f) </span><br><span class="line">            self.config = config </span><br><span class="line">            self._initialized = True </span><br><span class="line">            print(f&quot;初始化完成: &#123;yaml_file&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    @classmethod </span><br><span class="line">    def get_instance(cls, yaml_file=None): </span><br><span class="line">        &quot;&quot;&quot;获取单例实例的工厂方法&quot;&quot;&quot; </span><br><span class="line">        if cls._instance is None: </span><br><span class="line">            # 第一次调用：创建实例 </span><br><span class="line">            print(&quot;创建新实例&quot;) </span><br><span class="line">            cls._instance = cls(yaml_file) </span><br><span class="line">        elif yaml_file and not cls._instance._initialized: </span><br><span class="line">            # 实例存在但未初始化，且提供了配置文件 </span><br><span class="line">            print(&quot;初始化现有实例&quot;) </span><br><span class="line">            cls._instance._init_from_yaml(yaml_file) </span><br><span class="line">        # 其他情况：直接返回现有实例 </span><br><span class="line">        return cls._instance </span><br></pre></td></tr></table></figure>




<h5 id="cls"><a href="#cls" class="headerlink" title="cls"></a>cls</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cls是 类本身（class object），而不是类的实例。类方法第一个参数必须是它 </span><br><span class="line"> </span><br><span class="line">class IoProcess: </span><br><span class="line">    _instance = None  # 类变量，属于类本身 </span><br><span class="line">     </span><br><span class="line">    @classmethod </span><br><span class="line">    def get_instance(cls, yaml_file=None):  # cls 指向 IoProcess 类 </span><br><span class="line">        print(cls)  # &lt;class &#x27;__main__.IoProcess&#x27;&gt; </span><br><span class="line">        print(cls.__name__)  # &quot;IoProcess&quot; </span><br><span class="line">         </span><br><span class="line">        # cls 可以用来： </span><br><span class="line">        # 1. 访问类变量 </span><br><span class="line">        print(cls._instance)  # 访问类变量 _instance </span><br><span class="line">         </span><br><span class="line">        # 2. 创建新实例 </span><br><span class="line">        instance = cls()  # 等价于 IoProcess() </span><br><span class="line">         </span><br><span class="line">        # 3. 调用其他类方法 </span><br><span class="line">        cls.other_classmethod() </span><br><span class="line"> </span><br><span class="line"># 通过类调用 </span><br><span class="line">IoProcess.get_instance()  # cls 自动传入 IoProcess </span><br></pre></td></tr></table></figure>

<h4 id="classmethod和-staticmethod和实例方法"><a href="#classmethod和-staticmethod和实例方法" class="headerlink" title="@classmethod和@staticmethod和实例方法"></a>@classmethod和@staticmethod和实例方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@classmethod：参数cls </span><br><span class="line">实例和类都可以访问类方法 </span><br><span class="line"> </span><br><span class="line">@staticmethod：无特殊参数 </span><br><span class="line">实例和类都可以访问类方法 </span><br><span class="line"> </span><br><span class="line">实例方法：参数self </span><br><span class="line">实例可以访问 </span><br><span class="line"> </span><br><span class="line">只有实例才可以访问实例属性 </span><br><span class="line">@classmethod和@staticmethod都可以访问类属性 </span><br></pre></td></tr></table></figure>




<h2 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46887489/article/details/134959269">第21关 从零到一：在 K8s 中部署 Job 和 CronJob 的全面指导_job部署-CSDN博客</a> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Kubernetes的简称 </span><br><span class="line"> </span><br><span class="line">容器编排平台，主要用于自动化部署、扩展和管理容器化应用程序 </span><br><span class="line"> </span><br><span class="line">腾讯汽车云容器服务是腾讯云面向汽车行业推出的容器化应用管理平台，主要服务于汽车企业的数字化应用开发和运维场景。基于Kubernetes技术 </span><br></pre></td></tr></table></figure>



<h2 id="shell命令"><a href="#shell命令" class="headerlink" title="shell命令"></a>shell命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">END_PART=$&#123;2:-10&#125; </span><br><span class="line">$2参数存在且不为空使用$2参数，不存在使用10 </span><br><span class="line"> </span><br><span class="line">CODE_PATH=$(pwd) </span><br><span class="line"> </span><br><span class="line">read -p &quot;请输入目标镜像tag: &quot; TAG </span><br><span class="line"> </span><br><span class="line">df -h 查看容量空间 还有磁盘 </span><br><span class="line"> </span><br><span class="line">whoami </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history </span><br></pre></td></tr></table></figure>

<h3 id="history设置执行时间"><a href="#history设置执行时间" class="headerlink" title="history设置执行时间"></a>history设置执行时间</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在~/.bashrc（或对应shell的配置文件）中添加： </span><br><span class="line">export HISTTIMEFORMAT=&quot;%F %T &quot; </span><br></pre></td></tr></table></figure>




<h2 id="docker-1"><a href="#docker-1" class="headerlink" title="docker"></a>docker</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a --format &quot;&#123;&#123;.Names&#125;&#125;&quot; | grep -q &quot;^$container_name$&quot; </span><br><span class="line">各部分含义： </span><br><span class="line"> </span><br><span class="line">docker ps -a --format &quot;&#123;&#123;.Names&#125;&#125;&quot; </span><br><span class="line">• </span><br><span class="line">获取所有容器的名称列表 </span><br><span class="line">• </span><br><span class="line">只输出容器的名称字段 </span><br><span class="line">2. </span><br><span class="line">grep -q &quot;^$container_name$&quot; </span><br><span class="line">• </span><br><span class="line">-q：静默模式，不输出匹配内容，只返回退出码 </span><br><span class="line">• </span><br><span class="line">^$container_name$： </span><br><span class="line">• </span><br><span class="line">^：匹配行首 </span><br><span class="line">• </span><br><span class="line">$container_name：变量，应该是容器名称 </span><br><span class="line">• </span><br><span class="line">$：匹配行尾 </span><br><span class="line">• </span><br><span class="line">整体：精确匹配容器名称（整行完全匹配） </span><br></pre></td></tr></table></figure>

<h3 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f $DOCKERFILE --build-arg BASE_IMAGE=$BASE_IMAGE  -t $TARGET_IMAGE . </span><br></pre></td></tr></table></figure>

<h3 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#changan-map.tencentcloudcr.com/train/spatiotemporal-data-production_system:base </span><br><span class="line">ARG BASE_IMAGE </span><br><span class="line">FROM $BASE_IMAGE </span><br><span class="line">WORKDIR /workspace </span><br><span class="line"> </span><br><span class="line">#设置环境变量 </span><br><span class="line">ENV CAFS_SDK_USE_PROVIDER_PROXY=true </span><br><span class="line">ENV CAFS_SDK_PROVIDER_PROXY=&quot;&#123;\&quot;xxx&quot;:[\&quot;xxx&quot;,\&quot;xxx\&quot;]&#125;&quot; </span><br><span class="line"> </span><br><span class="line">RUN rm -rf * </span><br><span class="line">COPY src /workspace/ </span><br><span class="line">RUN ./install.sh &amp;&amp; rm -rf /var/lib/apt/lists/* </span><br><span class="line">EXPOSE 3030 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通过ARG指令允许在构建时动态指定BASE_IMAGE </span><br><span class="line">设置CAFS_SDK_USE_PROVIDER_PROXY为true，启用代理 </span><br><span class="line">设置CAFS_SDK_PROVIDER_PROXY，配置 </span><br><span class="line">RUN执行命令 </span><br><span class="line">暴露3030端口供外部访问 </span><br></pre></td></tr></table></figure>

<h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -v /home/xxx/.vscode-server:/root/.vscode-server \ </span><br><span class="line">-v $CODE_PATH:/workspace \ </span><br><span class="line">--name $container_name \ </span><br><span class="line">-it xxxx:$Tag /bin/bash </span><br></pre></td></tr></table></figure>




<h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><p>ctrl + &#96; </p>
<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><h4 id="git配置"><a href="#git配置" class="headerlink" title="git配置"></a>git配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;xxx&quot;</span><br><span class="line"></span><br><span class="line">git config --global user.email &quot;xxx&quot;</span><br><span class="line"></span><br><span class="line">git config user.name</span><br><span class="line"></span><br><span class="line">git config --list --global</span><br></pre></td></tr></table></figure>

<h4 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line">git remote add 远程仓库别名(origin) http......(https://github.com/你的用户名/你的仓库名.git)</span><br><span class="line"></span><br><span class="line">git branch -M main (将当前所在的分支重命名为main)</span><br><span class="line"></span><br><span class="line">git push 远程仓库别名 main</span><br></pre></td></tr></table></figure>

<h4 id="克隆命令"><a href="#克隆命令" class="headerlink" title="克隆命令"></a>克隆命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b dev_lk http://liuke:Liuke1999@10.0.0.29:9091/9room/spatiotemporal-data-project.git </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/techforward/article/details/133203445">https://blog.csdn.net/techforward/article/details/133203445</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_73745224/article/details/149708684">https://blog.csdn.net/m0_73745224/article/details/149708684</a> </p>
<h4 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h4><h5 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch 分支名 创建分支 </span><br></pre></td></tr></table></figure>

<h5 id="显示分支"><a href="#显示分支" class="headerlink" title="显示分支"></a>显示分支</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">显示所有分支（本地+远程） </span><br><span class="line">git branch -a </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br><span class="line">只显示本地分支 </span><br><span class="line"> </span><br><span class="line">git branch -r </span><br><span class="line">只显示远程分支</span><br><span class="line"></span><br><span class="line">git branch -vv </span><br><span class="line">显示分支及其跟踪的远程分支</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git branch -v </span><br><span class="line">显示本地分支及其最近提交 </span><br><span class="line"></span><br><span class="line">[liuj@VM-16-2-tencentos spatiotemporal-data-project]$ git branch -v</span><br><span class="line">  dev             88a148a [behind 217] Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev</span><br><span class="line">  dev_asstercheck 6a30df7 [ahead 1] test修改</span><br><span class="line">* dev_ty          021de64 Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_ty</span><br></pre></td></tr></table></figure>

<h5 id="提交记录"><a href="#提交记录" class="headerlink" title="提交记录"></a>提交记录</h5><h6 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">git log </span><br><span class="line"> </span><br><span class="line">commit 456005affed0d488d8858a069cc37434ee2e0c3a (HEAD -&gt; dev_ty, origin/dev_ty) </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Fri Feb 6 09:07:41 2026 +0800 </span><br><span class="line"> </span><br><span class="line">    加了点注释 </span><br><span class="line"> </span><br><span class="line">commit 080ce0f73632085555dab8b792f27c0311425368 </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Fri Feb 6 09:07:25 2026 +0800 </span><br><span class="line"> </span><br><span class="line">    加了点注释 </span><br><span class="line"> </span><br><span class="line">commit 6b09ab641376dab64b88bef2a03ec8394f6bf859 </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Thu Feb 5 21:28:27 2026 +0800 </span><br></pre></td></tr></table></figure>

<h6 id="git-log-–oneline"><a href="#git-log-–oneline" class="headerlink" title="git log –oneline"></a>git log –oneline</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 一行显示一条提交（简洁） </span><br><span class="line"> </span><br><span class="line">456005a (HEAD -&gt; dev_ty, origin/dev_ty) 加了点注释 </span><br><span class="line">080ce0f 加了点注释 </span><br><span class="line">6b09ab6 init漏写schedule </span><br><span class="line">9ed8aa4 add lable import to mongodb </span><br><span class="line">b23c536 Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_pre </span><br><span class="line">f885f1b Merge branch &#x27;dev_pre&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_yr </span><br><span class="line">3a64d57 Merge branch &#x27;dev_yr&#x27; into &#x27;dev&#x27; </span><br><span class="line">cd169cb Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_yr </span><br><span class="line">a8cb1a6 Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_pre </span><br><span class="line">a0f2083 添加带数据版本的系统调度逻辑 </span><br><span class="line">7362b6c Merge branch &#x27;dev_ty&#x27; into &#x27;dev&#x27; </span><br><span class="line">bd1a240 label拆之后新增失败统计，labelchecker路径获取方式修改 </span><br><span class="line">a2abac9 update det3d </span><br><span class="line">6f9ed97 修改监控job </span><br><span class="line">1e7dc4c label资产修改了mongoclient使用方式 </span><br><span class="line">fd583dc temp update </span><br><span class="line">99b29da Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_yr </span><br><span class="line">5dfc0e6 重构资产代码 </span><br><span class="line">a45243d Merge branch &#x27;dev&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_ty </span><br><span class="line">11d8070 update mongo resource </span><br></pre></td></tr></table></figure>

<h6 id="git-log-–graph"><a href="#git-log-–graph" class="headerlink" title="git log –graph"></a>git log –graph</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 显示图形化分支结构 </span><br><span class="line"> </span><br><span class="line">git log --graph </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">* commit 456005affed0d488d8858a069cc37434ee2e0c3a (HEAD -&gt; dev_ty, origin/dev_ty) </span><br><span class="line">| Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">| Date:   Fri Feb 6 09:07:41 2026 +0800 </span><br><span class="line">|  </span><br><span class="line">|     加了点注释 </span><br><span class="line">|  </span><br><span class="line">* commit 080ce0f73632085555dab8b792f27c0311425368 </span><br><span class="line">| Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">| Date:   Fri Feb 6 09:07:25 2026 +0800 </span><br><span class="line">|  </span><br><span class="line">|     加了点注释 </span><br><span class="line">|  </span><br><span class="line">* commit 6b09ab641376dab64b88bef2a03ec8394f6bf859 </span><br><span class="line">| Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">| Date:   Thu Feb 5 21:28:27 2026 +0800 </span><br><span class="line">|  </span><br><span class="line">|     init漏写schedule </span><br><span class="line">|  </span><br><span class="line">* commit 9ed8aa4434fd20a7bbe3d7c07e8e080d3033720f </span><br><span class="line">| Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">| Date:   Thu Feb 5 19:36:17 2026 +0800 </span><br><span class="line">|  </span><br><span class="line">|     add lable import to mongodb </span><br><span class="line">|    </span><br><span class="line">*   commit 04b0002cf1076058322bc3affcef67e4c5e5c865 </span><br><span class="line">|\  Merge: 0ddde82 b3a1799 </span><br><span class="line">| | Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">| | Date:   Thu Feb 5 19:03:58 2026 +0800 </span><br><span class="line">| |  </span><br><span class="line">| |     Merge branch &#x27;dev_yr&#x27; of http://10.0.0.29:9091/9room/spatiotemporal-data-project into dev_ty </span><br><span class="line">| |  </span><br><span class="line">| * commit b3a1799d36b020fe5d1f03f29a84647814bbc9ba (origin/dev_yr) </span><br><span class="line">| | Author: yr &lt;2521275899@qq.com&gt; </span><br><span class="line">| | Date:   Thu Feb 5 18:47:17 2026 +0800 </span><br><span class="line">| |  </span><br><span class="line">| |     update label </span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 显示完整信息 </span><br><span class="line">git log --stat        # 显示文件变更统计 </span><br><span class="line">git log -p            # 显示具体修改内容（diff） </span><br><span class="line">git log --name-only   # 只显示修改的文件名 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[liuj@VM-16-2-tencentos spatiotemporal-data-project]$ git log -p </span><br><span class="line">commit 456005affed0d488d8858a069cc37434ee2e0c3a (HEAD -&gt; dev_ty, origin/dev_ty) </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Fri Feb 6 09:07:41 2026 +0800 </span><br><span class="line"> </span><br><span class="line">    加了点注释 </span><br><span class="line"> </span><br><span class="line">diff --git a/production_system/src/workspace/partitions/partition_defs.py b/production_system/src/workspace/partitions/partition_defs.py </span><br><span class="line">index ad99ec1..1961ccc 100644 </span><br><span class="line">--- a/production_system/src/workspace/partitions/partition_defs.py </span><br><span class="line">+++ b/production_system/src/workspace/partitions/partition_defs.py </span><br><span class="line">@@ -18,7 +18,7 @@ time_window_task_partitions_for_statistical_analysis = TimeWindowPartitionsDefin </span><br><span class="line">     #cron_schedule=&quot;*/3 * * * *&quot;,  设置成这样，分区数量不符合要求 </span><br><span class="line">     timezone=&quot;Asia/Shanghai&quot;, </span><br><span class="line">     fmt=&quot;%Y-%m-%d&quot;, </span><br><span class="line">-    end_offset=1,  # 提前显示 </span><br><span class="line">+    end_offset=1,  # DailyPartitionsDefinition会延迟一天，time_window_task_partitions_for_statistical_analysis的end_offset=1提前显示当天 </span><br><span class="line"> ) </span><br><span class="line">  </span><br><span class="line"> __all__ = [ &quot;clip_partitions&quot;,&#x27;daily_task_partitions&#x27;,&#x27;lable_job_clip_partitions&#x27;, </span><br><span class="line"> </span><br><span class="line">commit 080ce0f73632085555dab8b792f27c0311425368 </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Fri Feb 6 09:07:25 2026 +0800 </span><br><span class="line"> </span><br><span class="line">    加了点注释 </span><br><span class="line"> </span><br><span class="line">diff --git a/.vscode/settings.json b/.vscode/settings.json </span><br><span class="line">index 3516cb9..0ae70d2 100644 </span><br><span class="line">--- a/.vscode/settings.json </span><br><span class="line">+++ b/.vscode/settings.json </span><br><span class="line">@@ -1,3 +1,5 @@ </span><br><span class="line"> &#123; </span><br><span class="line">-    &quot;python.formatting.provider&quot;: &quot;autopep8&quot; </span><br><span class="line">+    &quot;python.formatting.provider&quot;: &quot;autopep8&quot;, </span><br><span class="line">+    &quot;workbench.editor.enablePreviewFromCodeNavigation&quot;: true, </span><br><span class="line">+    &quot;workbench.editor.enablePreviewFromQuickOpen&quot;: true </span><br><span class="line"> &#125; </span><br><span class="line">\ No newline at end of file </span><br><span class="line"> </span><br><span class="line">commit 6b09ab641376dab64b88bef2a03ec8394f6bf859 </span><br><span class="line">Author: 202226460 &lt;202226460@any3.com&gt; </span><br><span class="line">Date:   Thu Feb 5 21:28:27 2026 +0800 </span><br></pre></td></tr></table></figure>




<h6 id="筛选"><a href="#筛选" class="headerlink" title="筛选"></a>筛选</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 按数量限制 </span><br><span class="line">git log -5           # 显示最近5条提交 </span><br><span class="line">git log -n 10        # 显示最近10条提交 </span><br><span class="line"> </span><br><span class="line"># 按时间筛选 </span><br><span class="line">git log --since=&quot;2026-01-01&quot; </span><br><span class="line">git log --until=&quot;2026-01-31&quot; </span><br><span class="line">git log --since=&quot;2 weeks ago&quot; </span><br><span class="line"> </span><br><span class="line"># 按作者筛选 </span><br><span class="line">git log --author=&quot;张三&quot; </span><br><span class="line">git log --author=&quot;zhangsan&quot; </span><br><span class="line"> </span><br><span class="line"># 按提交信息筛选 </span><br><span class="line">git log --grep=&quot;bugfix&quot;   # 搜索包含&quot;bugfix&quot;的提交信息 </span><br><span class="line"> </span><br><span class="line"># 按文件筛选 </span><br><span class="line">git log -- README.md      # 查看README.md的修改历史 </span><br><span class="line">git log -- src/           # 查看src目录的修改历史 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 最实用的组合：图形化+一行显示 </span><br><span class="line">git log --oneline --graph --all </span><br><span class="line"> </span><br><span class="line"># 显示统计信息+图形 </span><br><span class="line">git log --stat --graph </span><br><span class="line"> </span><br><span class="line"># 漂亮的格式化输出 </span><br><span class="line">git log --pretty=format:&quot;%h - %an, %ar : %s&quot; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看在dev分支但不在main分支的提交 </span><br><span class="line">git log main..dev </span><br><span class="line"> </span><br><span class="line"># 查看两个分支的差异 </span><br><span class="line">git log branch1..branch2 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 显示所有分支的时间线 </span><br><span class="line">git log --oneline --graph --all </span><br><span class="line"> </span><br><span class="line"># 按时间倒序 </span><br><span class="line">git log --reverse </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 自定义输出格式 </span><br><span class="line">git log --pretty=format:&quot;%C(yellow)%h %Creset%s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&quot; </span><br><span class="line"> </span><br><span class="line"># 常用占位符： </span><br><span class="line"># %h - 短哈希 </span><br><span class="line"># %H - 完整哈希 </span><br><span class="line"># %s - 提交说明 </span><br><span class="line"># %an - 作者名 </span><br><span class="line"># %ar - 相对时间 </span><br><span class="line"># %ad - 日期 </span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">分页模式下的常用操作键 </span><br><span class="line">按键 </span><br><span class="line"> </span><br><span class="line">功能 </span><br><span class="line"> </span><br><span class="line">说明 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">空格键 </span><br><span class="line"> </span><br><span class="line">向下翻一页 </span><br><span class="line"> </span><br><span class="line">最常用 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">回车键 </span><br><span class="line"> </span><br><span class="line">向下翻一行 </span><br><span class="line"> </span><br><span class="line">逐行查看 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">b </span><br><span class="line"> </span><br><span class="line">向上翻一页 </span><br><span class="line"> </span><br><span class="line">回看内容 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">q </span><br><span class="line"> </span><br><span class="line">退出分页模式 </span><br><span class="line"> </span><br><span class="line">返回命令行 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">/关键词 </span><br><span class="line"> </span><br><span class="line">搜索内容 </span><br><span class="line"> </span><br><span class="line">输入/后输入关键词搜索 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">n </span><br><span class="line"> </span><br><span class="line">查找下一个匹配项 </span><br><span class="line"> </span><br><span class="line">配合搜索使用 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">N </span><br><span class="line"> </span><br><span class="line">查找上一个匹配项 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">g </span><br><span class="line"> </span><br><span class="line">跳到第一行 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">G </span><br><span class="line"> </span><br><span class="line">跳到最后一行 </span><br></pre></td></tr></table></figure>




<h4 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名   切换分支 </span><br><span class="line">git checkout -b 分支名 创建和切换 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这个命令是错误的，因为它试图切换到origin这个分支，但origin是一个远程仓库的别名，不是一个分支。 </span><br><span class="line">正确的应该是： </span><br><span class="line">git checkout branch_name- 切换到指定分支 </span><br><span class="line">git checkout -b new_branch- 创建并切换到新分支 </span><br><span class="line">git checkout origin/dev_yr- 创建一个跟踪远程分支的本地分支 </span><br></pre></td></tr></table></figure>

<h4 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d 分支名 删除分支 </span><br></pre></td></tr></table></figure>

<h4 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git merge origin/dev_yr  将远程分支 origin/dev_yr合并到当前分支 </span><br><span class="line">或者 </span><br><span class="line">git pull origin dev_yr </span><br><span class="line"> </span><br><span class="line">这个命令实际上是两个操作的组合： </span><br><span class="line">git fetch origin dev_yr- 获取远程 dev_yr分支的最新代码 </span><br><span class="line">git merge FETCH_HEAD- 将获取的远程分支合并到当前分支 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 1. 先将你的修改暂存起来(执行下面操作，要先暂存，不然代码会丢失) </span><br><span class="line">git stash </span><br><span class="line"> </span><br><span class="line"># 2. 拉取远程最新代码 </span><br><span class="line">git pull origin dev </span><br><span class="line"> </span><br><span class="line"># 3. 将你暂存的修改恢复回来 </span><br><span class="line">git stash pop </span><br></pre></td></tr></table></figure>

<h5 id="git-fetch和git-pull"><a href="#git-fetch和git-pull" class="headerlink" title="git fetch和git pull"></a>git fetch和git pull</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch和git pull的主要区别如下： </span><br><span class="line">git fetch: 仅更新远程分支的信息，不会自动合并到本地分支。用户需要手动执行合并操作。  </span><br><span class="line">git pull: 同时执行 git fetch 和 git merge，直接将远程分支的更新合并到当前分支，可能隐藏过程细节。 </span><br></pre></td></tr></table></figure>

<h5 id="FETCH-HEAD与HEAD的区别"><a href="#FETCH-HEAD与HEAD的区别" class="headerlink" title="FETCH_HEAD与HEAD的区别"></a>FETCH_HEAD与HEAD的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HEAD是一个指向当前工作分支的引用，而FETCH_HEAD则是指向最后一次从远程仓库抓取分支的最新状态。HEAD通常用于表示当前工作分支的状态，而FETCH_HEAD则用于表示最近一次从远程仓库拉取的数据。 </span><br></pre></td></tr></table></figure>




<h4 id="发布分支"><a href="#发布分支" class="headerlink" title="发布分支"></a>发布分支</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Publish Branch </span><br><span class="line">当你在本地创建了一个新分支，但远程仓库还没有这个分支时，你需要将这个本地分支&quot;发布&quot;（推送）到远程仓库 </span><br><span class="line"> </span><br><span class="line"># 1. 在本地创建新分支 </span><br><span class="line">git checkout -b feature/new-feature </span><br><span class="line"> </span><br><span class="line"># 2. 进行开发，做了一些提交 </span><br><span class="line">git add . </span><br><span class="line">git commit -m &quot;Add new feature&quot; </span><br><span class="line"> </span><br><span class="line"># 3. 将本地分支发布到远程仓库 </span><br><span class="line">git push -u origin feature/new-feature </span><br><span class="line"># 这里的 -u 表示设置上游分支（upstream） </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">网页上合并分支，并删除当前分支 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web ide修改代码并提交 </span><br></pre></td></tr></table></figure>




<h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 当前在 feature 分支，有未提交的修改 </span><br><span class="line">git status  # 显示有修改的文件 </span><br><span class="line"> </span><br><span class="line"># 1. 暂存当前修改 </span><br><span class="line">git stash </span><br><span class="line"># 或 git stash save &quot;描述信息&quot; </span><br><span class="line"> </span><br><span class="line"># 2. 工作区变干净了 </span><br><span class="line">git status  # 显示没有修改 </span><br><span class="line"> </span><br><span class="line"># 3. 切换到其他分支 </span><br><span class="line">git checkout main </span><br><span class="line"> </span><br><span class="line"># 4. 修复bug后，回到 feature 分支 </span><br><span class="line">git checkout feature </span><br><span class="line"> </span><br><span class="line"># 5. 恢复暂存的修改 </span><br><span class="line">git stash pop </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">场景2：拉取最新代码前 </span><br><span class="line">你想拉取远程更新，但有未提交的修改： </span><br><span class="line"># 有本地修改，但想先拉取最新代码 </span><br><span class="line">git stash      # 暂存修改 </span><br><span class="line">git pull       # 拉取最新代码 </span><br><span class="line">git stash pop  # 恢复修改 </span><br></pre></td></tr></table></figure>

<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin dev_ty --force </span><br></pre></td></tr></table></figure>




<h3 id="vscode-1"><a href="#vscode-1" class="headerlink" title=".vscode"></a>.vscode</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launch.json 可以自行配置，vscode用于调试配置的文件 </span><br></pre></td></tr></table></figure>

<h3 id="调试源码"><a href="#调试源码" class="headerlink" title="调试源码"></a>调试源码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 在终端中执行 </span><br><span class="line">cd /workspace/src/workspace/sensors/test </span><br><span class="line"> </span><br><span class="line"># 创建指向源码的符号链接 </span><br><span class="line">ln -s /workspace/data_engine/data_engine ./data_engine </span><br><span class="line"> </span><br><span class="line"># 现在可以直接导入 </span><br><span class="line"># test.py </span><br><span class="line">import data_engine </span><br><span class="line">from data_engine import DataEngine, COSStorage </span><br></pre></td></tr></table></figure>

<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p><a target="_blank" rel="noopener" href="https://www.runoob.com/mongodb/mongodb-databases-documents-collections.html">MongoDB 概念解析 | 菜鸟教程</a> </p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qijingjing/p/17361230.html#3MongoDB_308">Mongodb入门到精通—＞ 保姆级别教程 - JamieChyi - 博客园</a> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成，文档类似于 JSON 对象，字段值可以包含其他文档，数组及文档数组； </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库 集合(collection) 文档(document) 字段 主键(_id) 索引(index) 表连接,MongoDB不支持 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">文档中的键/值对是有序的。 </span><br><span class="line"> </span><br><span class="line">MongoDB区分类型和大小写。 </span><br><span class="line">MongoDB的文档不能有重复的键。 </span><br><span class="line"> </span><br><span class="line">文档键命名规范： </span><br><span class="line">键不能含有\0 (空字符)。这个字符用来表示键的结尾。 </span><br><span class="line">.和$有特别的意义，只有在特定环境下才能使用。 </span><br><span class="line">以下划线&quot;_&quot;开头的键是保留的(不是严格要求的)。 </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符。 </span><br><span class="line">文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。 </span><br></pre></td></tr></table></figure>



<h2 id="12-23交流"><a href="#12-23交流" class="headerlink" title="12.23交流"></a>12.23交流</h2><p>run_dev.sh -p<br>docker -run -h 0.0.0.0 </p>
<p>进入容器之后，外部代码修改不一定得行，chmod 777 *<br>ip:4000 </p>
<p><strong>init</strong>.py和definitions.py </p>
<p>build.py 0.0.2 </p>
<p>build.py学习 </p>
<h2 id="测试杨瑞"><a href="#测试杨瑞" class="headerlink" title="测试杨瑞"></a>测试杨瑞</h2><p>. env.sh<br>env </p>
<p>clip_task_lidar_extcalib_todo: </p>
<p>CD701_LS6C3E2X5SK400065_2025-12-23_10-09-23 </p>
<p>CD701_LS6C3G342SK400136_2025-12-23_15-56-57 </p>
<p>CD701_LS6C3G347RA400116_2025-12-23_18-41-22 </p>
<p>CD701_LS6C3G347RA400116_2025-12-23_17-14-57 </p>
<h3 id="批量处理sensor备份"><a href="#批量处理sensor备份" class="headerlink" title="批量处理sensor备份"></a>批量处理sensor备份</h3><h4 id="lidar-extcalib-sensor-py"><a href="#lidar-extcalib-sensor-py" class="headerlink" title="lidar_extcalib_sensor.py"></a>lidar_extcalib_sensor.py</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime </span><br><span class="line">from dagster import DagsterEventType,asset_sensor,AssetKey,RunRequest,sensor,\ </span><br><span class="line">      SensorEvaluationContext,\ </span><br><span class="line">      EventLogEntry </span><br><span class="line">from ..assets import clip_task_check_parse_todo </span><br><span class="line">from typing import cast </span><br><span class="line">from dagster_graphql import DagsterGraphQLClient </span><br><span class="line">@sensor( </span><br><span class="line">    required_resource_keys=&#123;&#x27;graphql_client&#x27;&#125;, </span><br><span class="line">    minimum_interval_seconds=60, </span><br><span class="line">    job_name=&#x27;lidar_extcalib_todo_job&#x27; </span><br><span class="line">) </span><br><span class="line">def auto_excute_lidar_extcalib_sensor(context: SensorEvaluationContext): </span><br><span class="line">    # dagster_event = event_log_entry.dagster_event </span><br><span class="line"> </span><br><span class="line">    # if not (dagster_event and  </span><br><span class="line">    #         dagster_event.event_type_value == DagsterEventType.ASSET_MATERIALIZATION.value): </span><br><span class="line">    #     return None </span><br><span class="line"> </span><br><span class="line">    # asset_materialization = dagster_event.event_specific_data.materialization </span><br><span class="line">    # asset_key = asset_materialization.asset_key </span><br><span class="line">    # partition = asset_materialization.partition </span><br><span class="line"> </span><br><span class="line">    client = cast(DagsterGraphQLClient,context.resources.graphql_client) </span><br><span class="line">    query = &quot;&quot;&quot; </span><br><span class="line">  query PartitionHealthQuery($assetKey: AssetKeyInput!) &#123; </span><br><span class="line">  assetNodeOrError(assetKey: $assetKey) &#123; </span><br><span class="line">    ... on AssetNode &#123; </span><br><span class="line">      id </span><br><span class="line">      partitionKeysByDimension &#123; </span><br><span class="line">        name </span><br><span class="line">        type </span><br><span class="line">        partitionKeys </span><br><span class="line">        __typename </span><br><span class="line">      &#125; </span><br><span class="line">      assetPartitionStatuses &#123; </span><br><span class="line">        ... on TimePartitionStatuses &#123; </span><br><span class="line">          ranges &#123; </span><br><span class="line">            status </span><br><span class="line">            startTime </span><br><span class="line">            endTime </span><br><span class="line">            startKey </span><br><span class="line">            endKey </span><br><span class="line">            __typename </span><br><span class="line">          &#125; </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        ... on DefaultPartitionStatuses &#123; </span><br><span class="line">          materializedPartitions </span><br><span class="line">          materializingPartitions </span><br><span class="line">          failedPartitions </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        ... on MultiPartitionStatuses &#123; </span><br><span class="line">          primaryDimensionName </span><br><span class="line">          ranges &#123; </span><br><span class="line">            primaryDimStartKey </span><br><span class="line">            primaryDimEndKey </span><br><span class="line">            primaryDimStartTime </span><br><span class="line">            primaryDimEndTime </span><br><span class="line">            secondaryDim &#123; </span><br><span class="line">              ... on TimePartitionStatuses &#123; </span><br><span class="line">                ranges &#123; </span><br><span class="line">                  status </span><br><span class="line">                  startTime </span><br><span class="line">                  endTime </span><br><span class="line">                  startKey </span><br><span class="line">                  endKey </span><br><span class="line">                  __typename </span><br><span class="line">                &#125; </span><br><span class="line">                __typename </span><br><span class="line">              &#125; </span><br><span class="line">              ... on DefaultPartitionStatuses &#123; </span><br><span class="line">                materializedPartitions </span><br><span class="line">                materializingPartitions </span><br><span class="line">                failedPartitions </span><br><span class="line">                __typename </span><br><span class="line">              &#125; </span><br><span class="line">              __typename </span><br><span class="line">            &#125; </span><br><span class="line">            __typename </span><br><span class="line">          &#125; </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        __typename </span><br><span class="line">      &#125; </span><br><span class="line">      __typename </span><br><span class="line">    &#125; </span><br><span class="line">    __typename </span><br><span class="line">  &#125; </span><br><span class="line">&#125; </span><br><span class="line">    &quot;&quot;&quot; </span><br><span class="line">     </span><br><span class="line">    assetkey = &quot;clip_task_check_parse_todo&quot; </span><br><span class="line">    variables = &#123; </span><br><span class="line">            &quot;assetKey&quot;: &#123; </span><br><span class="line">                &quot;path&quot;: [ </span><br><span class="line">                f&quot;&#123;assetkey&#125;&quot; </span><br><span class="line">                ] </span><br><span class="line">            &#125; </span><br><span class="line">            &#125; </span><br><span class="line"> </span><br><span class="line">    # 获取clip_task_check_parse_todo物化成功的分区 </span><br><span class="line">    result = client._execute(query=query,variables=variables) </span><br><span class="line">    # dict_keys([&#x27;materializedPartitions&#x27;, &#x27;materializingPartitions&#x27;, &#x27;failedPartitions&#x27;, &#x27;__typename&#x27;]) </span><br><span class="line">    assetPartitionStatuses = result.get(&quot;assetNodeOrError&quot;).get(&quot;assetPartitionStatuses&quot;) </span><br><span class="line">    check_parse_mdp = assetPartitionStatuses.get(&quot;materializedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;check_parse_mdp 长度:&#123;len(check_parse_mdp)&#125; 值:&#123;check_parse_mdp&#125;&quot;) </span><br><span class="line"> </span><br><span class="line">    # 获取clip_task_time_algin_todo物化成功的分区 </span><br><span class="line">    assetkey = &quot;clip_task_time_algin_todo&quot; </span><br><span class="line">    variables = &#123; </span><br><span class="line">            &quot;assetKey&quot;: &#123; </span><br><span class="line">                &quot;path&quot;: [ </span><br><span class="line">                f&quot;&#123;assetkey&#125;&quot; </span><br><span class="line">                ] </span><br><span class="line">            &#125; </span><br><span class="line">            &#125; </span><br><span class="line">    result = client._execute(query=query,variables=variables) </span><br><span class="line">    # dict_keys([&#x27;materializedPartitions&#x27;, &#x27;materializingPartitions&#x27;, &#x27;failedPartitions&#x27;, &#x27;__typename&#x27;]) </span><br><span class="line">    assetPartitionStatuses = result.get(&quot;assetNodeOrError&quot;).get(&quot;assetPartitionStatuses&quot;) </span><br><span class="line">    time_algin_mgp = assetPartitionStatuses.get(&quot;materializingPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;time_algin_mgp 长度:&#123;len(time_algin_mgp)&#125; 值:&#123;time_algin_mgp&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    if len(time_algin_mgp)&gt;0: </span><br><span class="line">         context.log.info(f&quot;lidar_extcalib_todo_job有正在物化的分区,不执行新的物化！&quot;) </span><br><span class="line">         return None </span><br><span class="line">     </span><br><span class="line">    time_algin_mdp = assetPartitionStatuses.get(&quot;materializedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;time_algin_mdp 长度:&#123;len(time_algin_mdp)&#125; 值:&#123;time_algin_mdp&#125;&quot;) </span><br><span class="line">    time_algin_fdp = assetPartitionStatuses.get(&quot;failedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;time_algin_fdp 长度:&#123;len(time_algin_fdp)&#125; 值:&#123;time_algin_fdp&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    # 失败的分区单独处理 </span><br><span class="line">    result_partitions = set(check_parse_mdp).difference(set(time_algin_mdp)).difference(set(time_algin_fdp)) </span><br><span class="line">    context.log.info(f&quot;result_partitions 长度:&#123;len(result_partitions)&#125; 值:&#123;result_partitions&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    if result_partitions: </span><br><span class="line">            run_requests = [] </span><br><span class="line">            for clip_name in (result_partitions[0:200] if result_partitions&gt;200 else result_partitions): </span><br><span class="line">                run_requests.append(RunRequest(partition_key=clip_name)) </span><br><span class="line">                context.log.info(f&quot;请求下游处理 &#123;clip_name&#125;&quot;) </span><br><span class="line">            return run_requests </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h4 id="dynamic-annotation-sensor-py"><a href="#dynamic-annotation-sensor-py" class="headerlink" title="dynamic_annotation_sensor.py"></a>dynamic_annotation_sensor.py</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime </span><br><span class="line">from dagster import DagsterEventType,asset_sensor,AssetKey,RunRequest,sensor,\ </span><br><span class="line">      SensorEvaluationContext,\ </span><br><span class="line">      EventLogEntry </span><br><span class="line">from ..assets import clip_task_check_parse_todo </span><br><span class="line">from typing import cast </span><br><span class="line">from dagster_graphql import DagsterGraphQLClient </span><br><span class="line">@sensor( </span><br><span class="line">    # asset_key=AssetKey(&quot;clip_task_check_parse_todo&quot;), </span><br><span class="line">    required_resource_keys=&#123;&#x27;graphql_client&#x27;&#125;, </span><br><span class="line">    minimum_interval_seconds=60, </span><br><span class="line">    job_name=&#x27;dynamic_annotation_todo_job&#x27; </span><br><span class="line">) </span><br><span class="line">def dynamic_annotation_sensor(context: SensorEvaluationContext): </span><br><span class="line">    # dagster_event = event_log_entry.dagster_event </span><br><span class="line"> </span><br><span class="line">    # if not (dagster_event and  </span><br><span class="line">    #         dagster_event.event_type_value == DagsterEventType.ASSET_MATERIALIZATION.value): </span><br><span class="line">    #     return None </span><br><span class="line"> </span><br><span class="line">    # asset_materialization = dagster_event.event_specific_data.materialization </span><br><span class="line">    # asset_key = asset_materialization.asset_key </span><br><span class="line">    # partition = asset_materialization.partition </span><br><span class="line"> </span><br><span class="line">    client = cast(DagsterGraphQLClient,context.resources.graphql_client) </span><br><span class="line">    query = &quot;&quot;&quot; </span><br><span class="line">        query PartitionHealthQuery($assetKey: AssetKeyInput!) &#123; </span><br><span class="line">  assetNodeOrError(assetKey: $assetKey) &#123; </span><br><span class="line">    ... on AssetNode &#123; </span><br><span class="line">      id </span><br><span class="line">      partitionKeysByDimension &#123; </span><br><span class="line">        name </span><br><span class="line">        type </span><br><span class="line">        partitionKeys </span><br><span class="line">        __typename </span><br><span class="line">      &#125; </span><br><span class="line">      assetPartitionStatuses &#123; </span><br><span class="line">        ... on TimePartitionStatuses &#123; </span><br><span class="line">          ranges &#123; </span><br><span class="line">            status </span><br><span class="line">            startTime </span><br><span class="line">            endTime </span><br><span class="line">            startKey </span><br><span class="line">            endKey </span><br><span class="line">            __typename </span><br><span class="line">          &#125; </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        ... on DefaultPartitionStatuses &#123; </span><br><span class="line">          materializedPartitions </span><br><span class="line">          materializingPartitions </span><br><span class="line">          failedPartitions </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        ... on MultiPartitionStatuses &#123; </span><br><span class="line">          primaryDimensionName </span><br><span class="line">          ranges &#123; </span><br><span class="line">            primaryDimStartKey </span><br><span class="line">            primaryDimEndKey </span><br><span class="line">            primaryDimStartTime </span><br><span class="line">            primaryDimEndTime </span><br><span class="line">            secondaryDim &#123; </span><br><span class="line">              ... on TimePartitionStatuses &#123; </span><br><span class="line">                ranges &#123; </span><br><span class="line">                  status </span><br><span class="line">                  startTime </span><br><span class="line">                  endTime </span><br><span class="line">                  startKey </span><br><span class="line">                  endKey </span><br><span class="line">                  __typename </span><br><span class="line">                &#125; </span><br><span class="line">                __typename </span><br><span class="line">              &#125; </span><br><span class="line">              ... on DefaultPartitionStatuses &#123; </span><br><span class="line">                materializedPartitions </span><br><span class="line">                materializingPartitions </span><br><span class="line">                failedPartitions </span><br><span class="line">                __typename </span><br><span class="line">              &#125; </span><br><span class="line">              __typename </span><br><span class="line">            &#125; </span><br><span class="line">            __typename </span><br><span class="line">          &#125; </span><br><span class="line">          __typename </span><br><span class="line">        &#125; </span><br><span class="line">        __typename </span><br><span class="line">      &#125; </span><br><span class="line">      __typename </span><br><span class="line">    &#125; </span><br><span class="line">    __typename </span><br><span class="line">  &#125; </span><br><span class="line">&#125; </span><br><span class="line">    &quot;&quot;&quot; </span><br><span class="line">     </span><br><span class="line">    assetkey = &quot;clip_find_result_file_todo&quot; </span><br><span class="line">    variables = &#123; </span><br><span class="line">            &quot;assetKey&quot;: &#123; </span><br><span class="line">                &quot;path&quot;: [ </span><br><span class="line">                f&quot;&#123;assetkey&#125;&quot; </span><br><span class="line">                ] </span><br><span class="line">            &#125; </span><br><span class="line">            &#125; </span><br><span class="line"> </span><br><span class="line">    # 获取clip_find_result_file_todo物化成功的分区 </span><br><span class="line">    result = client._execute(query=query,variables=variables) </span><br><span class="line">    # dict_keys([&#x27;materializedPartitions&#x27;, &#x27;materializingPartitions&#x27;, &#x27;failedPartitions&#x27;, &#x27;__typename&#x27;]) </span><br><span class="line">    assetPartitionStatuses = result.get(&quot;assetNodeOrError&quot;).get(&quot;assetPartitionStatuses&quot;) </span><br><span class="line">    find_result_file_mdp = assetPartitionStatuses.get(&quot;materializedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;find_result_file_mdp 长度:&#123;len(find_result_file_mdp)&#125; 值:&#123;find_result_file_mdp&#125;&quot;) </span><br><span class="line">    # 获取clip_task_det3d_todo物化成功的分区 </span><br><span class="line">    assetkey = &quot;clip_task_det3d_todo&quot; </span><br><span class="line">    variables = &#123; </span><br><span class="line">            &quot;assetKey&quot;: &#123; </span><br><span class="line">                &quot;path&quot;: [ </span><br><span class="line">                f&quot;&#123;assetkey&#125;&quot; </span><br><span class="line">                ] </span><br><span class="line">            &#125; </span><br><span class="line">            &#125; </span><br><span class="line">    result = client._execute(query=query,variables=variables) </span><br><span class="line">     </span><br><span class="line">    # dict_keys([&#x27;materializedPartitions&#x27;, &#x27;materializingPartitions&#x27;, &#x27;failedPartitions&#x27;, &#x27;__typename&#x27;]) </span><br><span class="line">    assetPartitionStatuses = result.get(&quot;assetNodeOrError&quot;).get(&quot;assetPartitionStatuses&quot;) </span><br><span class="line">    det3d_mgp = assetPartitionStatuses.get(&quot;materializingPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;det3d_mgp 长度:&#123;len(det3d_mgp)&#125; 值:&#123;det3d_mgp&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    if len(det3d_mgp)&gt;0: </span><br><span class="line">         context.log.info(f&quot;clip_task_det3d_todo有正在物化的分区,不执行新的物化！&quot;) </span><br><span class="line">         return None </span><br><span class="line">     </span><br><span class="line">    det3d_mdp = assetPartitionStatuses.get(&quot;materializedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;det3d_mdp 长度:&#123;len(det3d_mdp)&#125; 值:&#123;det3d_mdp&#125;&quot;) </span><br><span class="line">    det3d_fdp = assetPartitionStatuses.get(&quot;failedPartitions&quot;) </span><br><span class="line">    context.log.info(f&quot;det3d_fdp 长度:&#123;len(det3d_fdp)&#125; 值:&#123;det3d_fdp&#125;&quot;) </span><br><span class="line">     </span><br><span class="line">    # 失败的分区单独处理 </span><br><span class="line">    result_partitions = set(find_result_file_mdp).difference(set(det3d_mdp)).difference(set(det3d_fdp)) </span><br><span class="line">    context.log.info(f&quot;result_partitions 长度:&#123;len(result_partitions)&#125; 值:&#123;result_partitions&#125;&quot;) </span><br><span class="line"> </span><br><span class="line">    if result_partitions: </span><br><span class="line">            run_requests = [] </span><br><span class="line">            for clip_name in (result_partitions[0:200] if result_partitions&gt;200 else result_partitions): </span><br><span class="line">                run_requests.append(RunRequest(partition_key=clip_name)) </span><br><span class="line">                context.log.info(f&quot;请求下游处理 &#123;clip_name&#125;&quot;) </span><br><span class="line">            return run_requests </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="sensor写法备份"><a href="#sensor写法备份" class="headerlink" title="sensor写法备份"></a>sensor写法备份</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime </span><br><span class="line">from typing import List, Optional, Set </span><br><span class="line">from dagster import DagsterEventType, DagsterRunStatus, EventRecordsFilter, RunRequest, RunStatusSensorContext, build_input_context, run_status_sensor, sensor,asset_sensor,AssetKey </span><br><span class="line">from ..jobs.auto_task_jobs import * </span><br><span class="line">from ..partitions.partition_defs import daily_task_partitions,clip_partitions </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">@run_status_sensor( </span><br><span class="line">        run_status=DagsterRunStatus.SUCCESS, </span><br><span class="line">        minimum_interval_seconds=60, </span><br><span class="line">        monitored_jobs=[auto_get_task_job], </span><br><span class="line">        request_job=clip_task_todo_job </span><br><span class="line">) </span><br><span class="line">def one_day_clip_auto_job_sensor(context: RunStatusSensorContext): </span><br><span class="line"> </span><br><span class="line">    run_id = context.dagster_run.run_id </span><br><span class="line">    instance = context.instance </span><br><span class="line"> </span><br><span class="line">    partition_tag = context.dagster_run.tags.get(&quot;dagster/partition&quot;) </span><br><span class="line">     </span><br><span class="line">    if partition_tag: </span><br><span class="line">        context.log.info(f&quot;检测到作业 &#123;context.dagster_run.job_name&#125; 成功执行&quot;) </span><br><span class="line">        context.log.info(f&quot;分区键: &#123;partition_tag&#125;&quot;) </span><br><span class="line">        #获取动态 </span><br><span class="line">        registered_clips: Set[str] = set(instance.get_dynamic_partitions(&quot;auto_dynamic&quot;)) </span><br><span class="line">         </span><br><span class="line">        # </span><br><span class="line">        asset_key=AssetKey(&quot;oneday_clips_srouce_data&quot;) </span><br><span class="line"> </span><br><span class="line">        materialization_records = instance.get_event_records( </span><br><span class="line">            EventRecordsFilter( </span><br><span class="line">                event_type= DagsterEventType.ASSET_MATERIALIZATION, </span><br><span class="line">                asset_key=asset_key, </span><br><span class="line">                asset_partitions=[partition_tag] </span><br><span class="line">            ), </span><br><span class="line">            limit=1 </span><br><span class="line">        ) </span><br><span class="line">         </span><br><span class="line">        if not materialization_records: </span><br><span class="line">            context.log.warning(f&quot;未找到分区 &#123;partition_tag&#125; 的物化记录&quot;) </span><br><span class="line">            return None </span><br><span class="line">         </span><br><span class="line">        data_record=  materialization_records[0] </span><br><span class="line">        materialization=   data_record.event_log_entry.dagster_event.step_materialization_data </span><br><span class="line">        data_metadata= materialization.materialization.metadata </span><br><span class="line"> </span><br><span class="line">        for metadata in data_metadata: </span><br><span class="line">            context.log.info(metadata) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">        # 构建输入上下文并加载数据 </span><br><span class="line">        # input_context = build_input_context( </span><br><span class="line">        #     asset_key=asset_key, </span><br><span class="line">        #     partition_key=partition_tag, </span><br><span class="line">        #     asset_partitions_def=daily_task_partitions, </span><br><span class="line">        #     instance=instance </span><br><span class="line">        # ) </span><br><span class="line">         </span><br><span class="line">        # asset_data = context.resources.io_manager.load_input(input_context) </span><br><span class="line">         </span><br><span class="line">        # if &#x27;clip_data&#x27; not in asset_data: </span><br><span class="line">        #     context.log.warning(f&quot;资产数据中缺少 &#x27;clip_data&#x27; 字段&quot;) </span><br><span class="line">        #     return None </span><br><span class="line">         </span><br><span class="line">        # clip_data = asset_data[&#x27;clip_data&#x27;] </span><br><span class="line">         </span><br><span class="line">        # # 提取所有剪辑名称 </span><br><span class="line">        # all_clips: List[str] = [] </span><br><span class="line">        # for clip_names in clip_data.values(): </span><br><span class="line">        #     if isinstance(clip_names, list): </span><br><span class="line">        #         for v in clip_names: </span><br><span class="line">        #             all_clips.append(v[&quot;data_name&quot;]) </span><br><span class="line">         </span><br><span class="line">        # if not all_clips: </span><br><span class="line">        #     context.log.info(&quot;未找到任何clip数据&quot;) </span><br><span class="line">        #     return None </span><br><span class="line">         </span><br><span class="line">        #  # 获取已注册的分区 </span><br><span class="line">        # registered_clips: Set[str] = set(context.instance.get_dynamic_partitions(&quot;clip_partitions&quot;)) </span><br><span class="line"> </span><br><span class="line">        # new_clips=  set(all_clips)-registered_clips </span><br><span class="line"> </span><br><span class="line">        # if not new_clips: </span><br><span class="line">        #     context.log.info(&quot;没有新的剪辑需要添加&quot;) </span><br><span class="line">        # else: </span><br><span class="line">        #     # 只添加新的剪辑分区 </span><br><span class="line">        #     context.instance.add_dynamic_partitions(&quot;clip_partitions&quot;, new_clips) </span><br><span class="line">        #     context.log.info(f&quot;成功添加 &#123;len(new_clips)&#125; 个新Clip分区&quot;) </span><br><span class="line"> </span><br><span class="line">        #  # 只有在有新剪辑时才触发运行 </span><br><span class="line">        # if new_clips: </span><br><span class="line">        #     run_requests = [] </span><br><span class="line">        #     for clip_name in new_clips: </span><br><span class="line">        #         run_requests.append(RunRequest(partition_key=clip_name,tags=&#123;&#x27;task_group&#x27;:partition_tag&#125;)) </span><br><span class="line">        #         context.log.info(f&quot;请求下游处理 &#123;clip_name&#125;&quot;) </span><br><span class="line">        #     return run_requests </span><br><span class="line">        # else: </span><br><span class="line">        return None </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure>




<h2 id="f"><a href="#f" class="headerlink" title="f"></a>f</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">g:1400   1300 </span><br><span class="line">s:900    34 </span><br><span class="line">y:1040 </span><br><span class="line">m:700 </span><br><span class="line">simi: </span><br><span class="line"> </span><br><span class="line">创业 </span><br><span class="line"> </span><br><span class="line">债券 国债、地方债、企业债 银行利率会影响 </span><br><span class="line"> </span><br><span class="line">公元 公元前 </span><br><span class="line">世纪 </span><br><span class="line"> </span><br><span class="line">财政赤字：xxxx  通过国债、地方债、主权外债来弥补 </span><br><span class="line">赤字率：赤字率 = (财政赤字总额 / 国内生产总值 GDP) × 100%   3% </span><br><span class="line">贸易赤字： </span><br><span class="line"> </span><br><span class="line">主权外债： </span><br><span class="line">美债：只有当它被美国以外的国家和实体持有时 </span><br><span class="line"> </span><br><span class="line">增值税： </span><br><span class="line"> </span><br><span class="line">期货 期权 </span><br><span class="line"> </span><br><span class="line">当日收益 = 本金*当日收益率 收盘本金=当日收益+开盘本金 </span><br><span class="line">第二日负收益率=前一日收益率 </span><br><span class="line">第二日收益 = 本金-本金*第二日负收益率*1  2  3  4</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">智汇君</div><div class="post-copyright__author_desc">路漫漫其修远兮，吾将上下而求索！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/01/17/%E6%9C%80%E6%96%B0%E7%AC%94%E8%AE%B0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/01/17/最新笔记/')">最新笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/01/17/%E6%9C%80%E6%96%B0%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Tech智汇站</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/01/17/%E7%BC%96%E5%88%B6%20%E4%BA%8B%E4%B8%9A%E7%BC%96%E6%9C%80%E5%AE%9E%E7%94%A8%E7%9A%84%E5%A4%87%E8%80%83%E7%AD%96%E7%95%A5/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">编制 事业编最实用的备考策略！</div></div></a></div><div class="next-post pull-right"><a href="/2025/01/17/%E6%97%A5%E8%AE%B0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">日记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">智汇君</h1><div class="author-info__desc">路漫漫其修远兮，吾将上下而求索！</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="/contact/" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(/img/博客微信公众号图片.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#docker"><span class="toc-number">1.1.</span> <span class="toc-text">docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v"><span class="toc-number">1.1.1.</span> <span class="toc-text">-v</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python"><span class="toc-number">1.2.</span> <span class="toc-text">python</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list"><span class="toc-number">1.2.2.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%94%9F%E6%88%90%E5%BC%8F"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">列表生成式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%BA%93"><span class="toc-number">1.2.3.</span> <span class="toc-text">时间库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#time"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">time</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#strptime"><span class="toc-number">1.2.3.1.1.</span> <span class="toc-text">.strptime()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gmtime"><span class="toc-number">1.2.3.1.2.</span> <span class="toc-text">.gmtime()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#strftime"><span class="toc-number">1.2.3.1.3.</span> <span class="toc-text">.strftime()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.2.3.1.4.</span> <span class="toc-text">时间戳</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#datetime"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">datetime</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#strftime-1"><span class="toc-number">1.2.3.2.1.</span> <span class="toc-text">.strftime()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#isoformat"><span class="toc-number">1.2.3.2.2.</span> <span class="toc-text">isoformat()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3-1"><span class="toc-number">1.2.3.2.3.</span> <span class="toc-text">时间戳</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#strptime-1"><span class="toc-number">1.2.3.2.4.</span> <span class="toc-text">strptime</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#timedelta"><span class="toc-number">1.2.3.2.5.</span> <span class="toc-text">timedelta</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.2.4.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#strip-lstrip-rstrip"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">.strip() .lstrip() .rstrip()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#count"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">.count()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">.join([])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#endswith"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">.endswith()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#startswith"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">.startswith()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split"><span class="toc-number">1.2.4.6.</span> <span class="toc-text">.split()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#repalce"><span class="toc-number">1.2.4.7.</span> <span class="toc-text">.repalce()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#find-index"><span class="toc-number">1.2.4.8.</span> <span class="toc-text">.find() .index()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#isdigit-isalpha-isalnum"><span class="toc-number">1.2.4.9.</span> <span class="toc-text">.isdigit() .isalpha() .isalnum()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#upper-lower-swapcase"><span class="toc-number">1.2.4.10.</span> <span class="toc-text">.upper() .lower() .swapcase()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#title"><span class="toc-number">1.2.4.11.</span> <span class="toc-text">.title()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#center-ljust-rjust"><span class="toc-number">1.2.4.12.</span> <span class="toc-text">.center() .ljust() .rjust()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#any-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">any()函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#enumerate"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">enumerate()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.2.6.</span> <span class="toc-text">三元运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-number">1.2.7.</span> <span class="toc-text">set()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#add"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">.add()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#update"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">.update()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">差操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%B7%AE%E9%9B%86%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.7.3.1.</span> <span class="toc-text">对称差集操作</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.7.4.</span> <span class="toc-text">交操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.7.5.</span> <span class="toc-text">并操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict"><span class="toc-number">1.2.8.</span> <span class="toc-text">dict</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#defaultdict"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">defaultdict</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dict-1"><span class="toc-number">1.2.8.2.</span> <span class="toc-text">dict</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#range"><span class="toc-number">1.2.8.3.</span> <span class="toc-text">range</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#isinstance%E5%92%8Ctype"><span class="toc-number">1.2.8.4.</span> <span class="toc-text">isinstance和type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cast"><span class="toc-number">1.2.8.5.</span> <span class="toc-text">cast()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list-1"><span class="toc-number">1.2.9.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sort"><span class="toc-number">1.2.9.1.</span> <span class="toc-text">.sort()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#append"><span class="toc-number">1.2.9.2.</span> <span class="toc-text">.append()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#extend"><span class="toc-number">1.2.9.3.</span> <span class="toc-text">.extend()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index"><span class="toc-number">1.2.9.4.</span> <span class="toc-text">.index()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os"><span class="toc-number">1.2.10.</span> <span class="toc-text">os</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#getenv"><span class="toc-number">1.2.10.1.</span> <span class="toc-text">getenv</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#listdir"><span class="toc-number">1.2.10.2.</span> <span class="toc-text">listdir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getcwd"><span class="toc-number">1.2.10.3.</span> <span class="toc-text">getcwd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#os-path"><span class="toc-number">1.2.10.4.</span> <span class="toc-text">os.path</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#os-remove"><span class="toc-number">1.2.10.5.</span> <span class="toc-text">os.remove()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6with-open"><span class="toc-number">1.2.11.</span> <span class="toc-text">读写文件with open</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json"><span class="toc-number">1.2.12.</span> <span class="toc-text">json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re"><span class="toc-number">1.2.13.</span> <span class="toc-text">re</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">1.2.14.</span> <span class="toc-text">日志</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loguru"><span class="toc-number">1.2.14.1.</span> <span class="toc-text">loguru</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#info"><span class="toc-number">1.2.14.1.1.</span> <span class="toc-text">.info</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#warning"><span class="toc-number">1.2.14.1.2.</span> <span class="toc-text">.warning</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logging"><span class="toc-number">1.2.14.2.</span> <span class="toc-text">logging</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Path"><span class="toc-number">1.2.15.</span> <span class="toc-text">Path</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#joinpath"><span class="toc-number">1.2.15.1.</span> <span class="toc-text">.joinpath()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exists"><span class="toc-number">1.2.15.2.</span> <span class="toc-text">.exists()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mkdir"><span class="toc-number">1.2.15.3.</span> <span class="toc-text">.mkdir()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parent"><span class="toc-number">1.2.15.4.</span> <span class="toc-text">.parent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-file"><span class="toc-number">1.2.15.5.</span> <span class="toc-text">.is_file()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-dir"><span class="toc-number">1.2.15.6.</span> <span class="toc-text">.is_dir()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#suffix"><span class="toc-number">1.2.15.7.</span> <span class="toc-text">.suffix</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#suffixes"><span class="toc-number">1.2.15.8.</span> <span class="toc-text">.suffixes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#name"><span class="toc-number">1.2.15.9.</span> <span class="toc-text">.name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stem"><span class="toc-number">1.2.15.10.</span> <span class="toc-text">.stem</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#property%E5%92%8Csetter"><span class="toc-number">1.2.16.</span> <span class="toc-text">@property和setter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#str%E5%92%8Crepr"><span class="toc-number">1.2.17.</span> <span class="toc-text">str和repr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval-%E5%92%8Cexec"><span class="toc-number">1.2.18.</span> <span class="toc-text">eval()和exec()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#eval"><span class="toc-number">1.2.18.1.</span> <span class="toc-text">eval</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exec"><span class="toc-number">1.2.18.2.</span> <span class="toc-text">exec</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%93"><span class="toc-number">1.2.19.</span> <span class="toc-text">库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tqdm"><span class="toc-number">1.2.19.1.</span> <span class="toc-text">tqdm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#argparse"><span class="toc-number">1.2.19.2.</span> <span class="toc-text">argparse</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#add-argument"><span class="toc-number">1.2.19.2.1.</span> <span class="toc-text">.add_argument</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#name-or-flags"><span class="toc-number">1.2.19.2.1.1.</span> <span class="toc-text">*name_or_flags</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#type"><span class="toc-number">1.2.19.2.1.2.</span> <span class="toc-text">type</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#default"><span class="toc-number">1.2.19.2.1.3.</span> <span class="toc-text">default</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#nargs"><span class="toc-number">1.2.19.2.1.4.</span> <span class="toc-text">nargs</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#action"><span class="toc-number">1.2.19.2.1.5.</span> <span class="toc-text">action</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#metavar"><span class="toc-number">1.2.19.2.1.6.</span> <span class="toc-text">metavar</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.2.19.2.1.7.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#copy"><span class="toc-number">1.2.19.3.</span> <span class="toc-text">copy</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.19.3.1.</span> <span class="toc-text">赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">1.2.19.3.2.</span> <span class="toc-text">浅拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">1.2.19.3.2.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">1.2.19.3.3.</span> <span class="toc-text">深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#deepcopy%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.19.3.3.1.</span> <span class="toc-text">deepcopy方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sys"><span class="toc-number">1.2.20.</span> <span class="toc-text">sys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">1.2.21.</span> <span class="toc-text">序列化和反序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.22.</span> <span class="toc-text">异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#init-py"><span class="toc-number">1.2.23.</span> <span class="toc-text">init.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.2.24.</span> <span class="toc-text">配置加载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#yaml%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.24.1.</span> <span class="toc-text">yaml文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.24.2.</span> <span class="toc-text">json文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">1.2.25.</span> <span class="toc-text">类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.25.1.</span> <span class="toc-text">函数参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#init%E5%92%8Cnew%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.25.2.</span> <span class="toc-text">init和new方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B1%BB"><span class="toc-number">1.2.25.3.</span> <span class="toc-text">延迟初始化类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.25.4.</span> <span class="toc-text">类方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cls"><span class="toc-number">1.2.25.4.1.</span> <span class="toc-text">cls</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#classmethod%E5%92%8C-staticmethod%E5%92%8C%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.25.5.</span> <span class="toc-text">@classmethod和@staticmethod和实例方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#k8s"><span class="toc-number">1.3.</span> <span class="toc-text">k8s</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">shell命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#history"><span class="toc-number">1.4.1.</span> <span class="toc-text">history</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history%E8%AE%BE%E7%BD%AE%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4"><span class="toc-number">1.4.2.</span> <span class="toc-text">history设置执行时间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-1"><span class="toc-number">1.5.</span> <span class="toc-text">docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-number">1.5.1.</span> <span class="toc-text">构建镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dockerfile"><span class="toc-number">1.5.2.</span> <span class="toc-text">dockerfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-run"><span class="toc-number">1.5.3.</span> <span class="toc-text">docker run</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode"><span class="toc-number">1.6.</span> <span class="toc-text">vscode</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.6.1.</span> <span class="toc-text">快捷键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git"><span class="toc-number">1.6.2.</span> <span class="toc-text">git</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#git%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">git配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">创建一个项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%8B%E9%9A%86%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">克隆命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-branch"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">git branch</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.4.1.</span> <span class="toc-text">创建分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.4.2.</span> <span class="toc-text">显示分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95"><span class="toc-number">1.6.2.4.3.</span> <span class="toc-text">提交记录</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#git-log"><span class="toc-number">1.6.2.4.3.1.</span> <span class="toc-text">git log</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#git-log-%E2%80%93oneline"><span class="toc-number">1.6.2.4.3.2.</span> <span class="toc-text">git log –oneline</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#git-log-%E2%80%93graph"><span class="toc-number">1.6.2.4.3.3.</span> <span class="toc-text">git log –graph</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AD%9B%E9%80%89"><span class="toc-number">1.6.2.4.3.4.</span> <span class="toc-text">筛选</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.5.</span> <span class="toc-text">切换分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.6.</span> <span class="toc-text">删除分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.7.</span> <span class="toc-text">合并分支</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#git-fetch%E5%92%8Cgit-pull"><span class="toc-number">1.6.2.7.1.</span> <span class="toc-text">git fetch和git pull</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#FETCH-HEAD%E4%B8%8EHEAD%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.6.2.7.2.</span> <span class="toc-text">FETCH_HEAD与HEAD的区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E5%88%86%E6%94%AF"><span class="toc-number">1.6.2.8.</span> <span class="toc-text">发布分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-stash"><span class="toc-number">1.6.2.9.</span> <span class="toc-text">git stash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.2.10.</span> <span class="toc-text">命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vscode-1"><span class="toc-number">1.6.3.</span> <span class="toc-text">.vscode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E6%BA%90%E7%A0%81"><span class="toc-number">1.6.4.</span> <span class="toc-text">调试源码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB"><span class="toc-number">1.7.</span> <span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.7.1.</span> <span class="toc-text">数据类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-23%E4%BA%A4%E6%B5%81"><span class="toc-number">1.8.</span> <span class="toc-text">12.23交流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%9D%A8%E7%91%9E"><span class="toc-number">1.9.</span> <span class="toc-text">测试杨瑞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86sensor%E5%A4%87%E4%BB%BD"><span class="toc-number">1.9.1.</span> <span class="toc-text">批量处理sensor备份</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#lidar-extcalib-sensor-py"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">lidar_extcalib_sensor.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dynamic-annotation-sensor-py"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">dynamic_annotation_sensor.py</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sensor%E5%86%99%E6%B3%95%E5%A4%87%E4%BB%BD"><span class="toc-number">1.9.2.</span> <span class="toc-text">sensor写法备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#f"><span class="toc-number">1.10.</span> <span class="toc-text">f</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/07/docker%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="docker学习记录"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="docker学习记录"/></a><div class="content"><a class="title" href="/2025/12/07/docker%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="docker学习记录">docker学习记录</a><time datetime="2025-12-07T13:30:14.000Z" title="发表于 2025-12-07 21:30:14">2025-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/09/Spring/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2025/09/09/Spring/" title="无题">无题</a><time datetime="2025-09-09T13:29:04.741Z" title="发表于 2025-09-09 21:29:04">2025-09-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/20/C%E8%AF%AD%E8%A8%80%E5%92%8CC++%E8%AF%AD%E8%A8%80/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2025/08/20/C%E8%AF%AD%E8%A8%80%E5%92%8CC++%E8%AF%AD%E8%A8%80/" title="无题">无题</a><time datetime="2025-08-20T13:41:38.357Z" title="发表于 2025-08-20 21:41:38">2025-08-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/14/python%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95%E7%A7%AF%E7%B4%AF/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2025/07/14/python%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95%E7%A7%AF%E7%B4%AF/" title="无题">无题</a><time datetime="2025-07-14T08:25:16.017Z" title="发表于 2025-07-14 16:25:16">2025-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/11/%E9%9D%A2%E8%AF%95%20Hbase/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2025/07/11/%E9%9D%A2%E8%AF%95%20Hbase/" title="无题">无题</a><time datetime="2025-07-11T09:24:44.656Z" title="发表于 2025-07-11 17:24:44">2025-07-11</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2026 By <a class="footer-bar-link" href="/" title="智汇君" target="_blank">智汇君</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">104</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">41</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://video-b2g.pages.dev/" title="视频解析"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/视频.png" alt="视频解析"/><span class="back-menu-item-text">视频解析</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://md5-uir.pages.dev/" title="md5值解密"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/MD5.png" alt="md5值解密"/><span class="back-menu-item-text">md5值解密</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://screencheck.pages.dev/#welcome" title="屏幕坏点检查"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/屏幕外观.png" alt="屏幕坏点检查"/><span class="back-menu-item-text">屏幕坏点检查</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://htmleditor-9lo.pages.dev/" title="在线html编辑器"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/html编辑器.png" alt="在线html编辑器"/><span class="back-menu-item-text">在线html编辑器</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://ttyong-github-io.pages.dev/" title="旧博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/博客.png" alt="旧博客"/><span class="back-menu-item-text">旧博客</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/GitHub/" style="font-size: 0.88rem;">GitHub<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>1</sup></a><a href="/tags/NodeJs/" style="font-size: 0.88rem;">NodeJs<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>3</sup></a><a href="/tags/github/" style="font-size: 0.88rem;">github<sup>1</sup></a><a href="/tags/idea/" style="font-size: 0.88rem;">idea<sup>1</sup></a><a href="/tags/%E5%85%AC%E8%80%83%E6%9D%A8%E8%80%81%E5%B8%88/" style="font-size: 0.88rem;">公考杨老师<sup>10</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">博客<sup>1</sup></a><a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 0.88rem;">大数据<sup>31</sup></a><a href="/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC%E4%B8%BB%E9%A2%98/" style="font-size: 0.88rem;">安知鱼主题<sup>1</sup></a><a href="/tags/%E5%BB%96%E9%9B%AA%E5%B3%B0/" style="font-size: 0.88rem;">廖雪峰<sup>15</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">计算机网络<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>10</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("24/12/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 智汇君 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("24/12/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="https://at.alicdn.com/t/c/font_4792307_02gxbpyxcpwp.js?spm=a313x.manage_type_myprojects.i1.10.56323a81KZGFDE&amp;file=font_4792307_02gxbpyxcpwp.js# 阿里图标symbol 引用链接，主题会进行加载 symbol 引用"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>